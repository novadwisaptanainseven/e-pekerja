(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[58],{1071:function(e,a,n){"use strict";n.r(a);var t=n(2),i=n(638),r=n(8),c=n(627),s=n(634),l=n(1),o=n.n(l),d=n(20),g=n(650),u=n(629),m=n(668),p=n(626),h=n(746),j=n(631),b=n.n(j),f=n(632),O=n.n(f),x=n(635),k=n(17),v=O()(b.a);a.default=function(e){var a=e.match.params,n=Object(d.g)(),j=Object(l.useState)([]),b=Object(r.a)(j,2),f=b[0],O=b[1],_=Object(l.useState)(""),w=Object(r.a)(_,2),y=w[0],N=w[1],S=Object(l.useState)(),C=Object(r.a)(S,2),E=C[0],P=C[1],z=Object(l.useState)(!1),B=Object(r.a)(z,2),F=B[0],G=B[1],R=Object(l.useState)(),D=Object(r.a)(R,2),L=D[0],M=D[1],I=Object(l.useState)(!1),q=Object(r.a)(I,2),W=q[0],T=q[1];Object(l.useEffect)((function(){Object(m.a)(O),Object(h.a)(a.id,N)}),[a]);var V=o.a.useMemo((function(){return function(e){var a=[];return e.forEach((function(e){a.push({value:e.id_pegawai,label:e.nama})})),a}(f)}),[f]),J=Object(l.useCallback)((function(){if(E){var e=E.name;M(e)}else M(null)}),[E]);Object(l.useEffect)((function(){J()}),[J]);var K={id_pegawai:y?y.id_pegawai:"",nama_penghargaan:y?y.nama_penghargaan:"",pemberi:y?y.pemberi:"",tgl_penghargaan:y?y.tgl_penghargaan:"",dokumentasi:void 0},H=function(){v.fire({icon:"success",title:"Edit Data Berhasil",showConfirmButton:!1,timer:1500}).then((function(e){n.push("/epekerja/admin/penghargaan")}))},X=function(e){var a="";for(var n in e)a+="".concat(e[n],", ");v.fire({icon:"error",title:"Edit Data Gagal",text:a}).then((function(e){G(!1)}))},A=["application/pdf","image/jpg","image/jpeg","image/png"],Q=x.c().shape({id_pegawai:x.e().required("Penerima harus diisi"),nama_penghargaan:x.e().required("Nama penghargaan harus diisi!"),pemberi:x.e().required("Pemberi harus diisi!"),tgl_penghargaan:x.e().required("Tanggal penghargaan harus diisi!"),dokumentasi:x.a().test("size","Kapasitas file maksimal 2 mb",(function(e){return!e||e&&e.size<=2048e3})).test("type","Ekstensi yang diperbolehkan hanya jpg, jpeg, png dan pdf",(function(e){return!e||e&&A.includes(e.type)}))}),U=function(e){var n=new FormData;n.append("id_pegawai",e.id_pegawai),n.append("nama_penghargaan",e.nama_penghargaan),n.append("pemberi",e.pemberi),n.append("tgl_penghargaan",e.tgl_penghargaan),e.dokumentasi&&n.append("dokumentasi",e.dokumentasi);var t,r=Object(i.a)(n.entries());try{for(r.s();!(t=r.n()).done;){var c=t.value;console.log(c)}}catch(s){r.e(s)}finally{r.f()}!function(e,a,n,t,i){n(!0),p.a.post("admin/penghargaan/".concat(e),a,{header:{"Content-Type":"multipart/form-data; boundary=".concat(a._boundary)}}).then((function(e){console.log(e.data),n(!1),t()})).catch((function(e){console.log(e.response.data),i(e.response.data.errors)}))}(a.id,n,G,H,X)},Y={control:function(e,a){return Object(t.a)(Object(t.a)({},e),{},{border:W?"1px solid #e55353":e.border})}};return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(c.h,{children:[Object(k.jsxs)(c.l,{className:"d-flex justify-content-between",children:[Object(k.jsx)("h3",{children:"Edit Penghargaan"}),Object(k.jsx)(c.f,{type:"button",color:"warning",className:"text-white",onClick:function(){n.goBack()},children:"Kembali"})]}),y?Object(k.jsx)(s.a,{initialValues:K,validationSchema:Q,enableReinitialize:!0,onSubmit:function(e){return U(e)},children:function(e){var a=e.values,n=e.errors,t=e.touched,i=e.handleChange,r=e.handleBlur,s=e.handleSubmit,l=e.setFieldValue;return Object(k.jsxs)(c.x,{onSubmit:s,className:"form-horizontal",children:[Object(k.jsxs)(c.i,{children:[Object(k.jsxs)(c.y,{row:!0,children:[Object(k.jsx)(c.n,{md:"3",children:Object(k.jsx)(c.L,{children:"Nama penerima"})}),Object(k.jsxs)(c.n,{children:[Object(k.jsx)(g.a,{styles:Y,name:"id_pegawai",id:"id_pegawai",onChange:function(e){T(!1),l("id_pegawai",e?e.value:"")},onFocus:function(){return T(!0)},placeholder:"-- Pilih Pegawai --",isSearchable:!0,isClearable:!0,defaultValue:{value:y?y.id_pegawai:"",label:y?y.nama:""},options:V}),!a.id_pegawai&&W&&Object(k.jsx)("div",{className:"text-danger mt-1",style:{fontSize:"0.8em"},children:"Nama penerima harus diisi"})]})]}),Object(k.jsxs)(c.y,{row:!0,children:[Object(k.jsx)(c.n,{md:"3",children:Object(k.jsx)(c.L,{children:"Nama Penghargaan"})}),Object(k.jsxs)(c.n,{children:[Object(k.jsx)(c.E,{type:"text",name:"nama_penghargaan",id:"nama_penghargaan",placeholder:"Masukkan nama penghargaan ",onChange:i,onBlur:r,value:a.nama_penghargaan,className:n.nama_penghargaan&&t.nama_penghargaan?"is-invalid":null}),n.nama_penghargaan&&t.nama_penghargaan&&Object(k.jsx)("div",{className:"invalid-feedback",children:n.nama_penghargaan})]})]}),Object(k.jsxs)(c.y,{row:!0,children:[Object(k.jsx)(c.n,{md:"3",children:Object(k.jsx)(c.L,{children:"Pemberi"})}),Object(k.jsxs)(c.n,{children:[Object(k.jsx)(c.E,{type:"text",name:"pemberi",id:"pemberi",placeholder:"Masukkan nama penghargaan ",onChange:i,onBlur:r,value:a.pemberi,className:n.pemberi&&t.pemberi?"is-invalid":null}),n.pemberi&&t.pemberi&&Object(k.jsx)("div",{className:"invalid-feedback",children:n.pemberi})]})]}),Object(k.jsxs)(c.y,{row:!0,children:[Object(k.jsx)(c.n,{md:"3",children:Object(k.jsx)(c.L,{children:"Tgl. Penghargaan"})}),Object(k.jsxs)(c.n,{children:[Object(k.jsx)(c.E,{type:"date",id:"tgl_penghargaan",name:"tgl_penghargaan",placeholder:"Masukkan tanggal penghargaan",onChange:i,onBlur:r,value:a.tgl_penghargaan,className:n.tgl_penghargaan&&t.tgl_penghargaan?"is-invalid":null}),n.tgl_penghargaan&&t.tgl_penghargaan&&Object(k.jsx)("div",{className:"invalid-feedback",children:n.tgl_penghargaan})]})]}),Object(k.jsxs)(c.y,{row:!0,children:[Object(k.jsx)(c.n,{md:"3",children:Object(k.jsxs)(c.L,{children:["File Dokumentasi Penghargaan ",Object(k.jsx)("br",{})]})}),Object(k.jsxs)(c.n,{children:[Object(k.jsx)(c.E,{type:"file",name:"dokumentasi",id:"dokumentasi",onChange:function(e){!function(e){e.target.files&&0!==e.target.files.length?P(e.target.files[0]):P(void 0)}(e),l("dokumentasi",e.target.files[0])},onBlur:r,className:n.dokumentasi&&t.dokumentasi?"is-invalid":null}),n.dokumentasi&&t.dokumentasi&&Object(k.jsx)("div",{className:"invalid-feedback",children:n.dokumentasi}),L&&Object(k.jsx)("p",{className:"mt-1",children:L}),Object(k.jsx)(c.z,{className:"help-block",children:"File harus bertipe pdf, jpg, jpeg, atau png dengan ukuran kurang dari 2 MB"})]})]})]}),Object(k.jsxs)(c.j,{children:[Object(k.jsx)(c.f,{color:"primary",type:"submit",className:"mr-1",disabled:!!F,onClick:function(){a.id_pegawai?T(!1):T(!0)},children:F?Object(k.jsx)("img",{width:21,src:u.e,alt:"load-animation"}):"Simpan"}),Object(k.jsx)(c.f,{color:"danger",type:"reset",className:"mr-1",children:"Reset"})]})]})}}):Object(k.jsx)("div",{children:Object(k.jsx)(c.X,{children:Object(k.jsx)(c.n,{className:"text-center",children:Object(k.jsx)("img",{className:"my-4 ml-3",width:30,src:u.d,alt:"load-animation"})})})})]})})}},658:function(e,a,n){"use strict";a.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},668:function(e,a,n){"use strict";n.d(a,"a",(function(){return i}));var t=n(626),i=function(e){t.a.get("admin/pegawai/semua-pegawai").then((function(a){e(a.data.data)})).catch((function(e){}))}},746:function(e,a,n){"use strict";n.d(a,"a",(function(){return i}));var t=n(626),i=function(e,a){t.a.get("admin/penghargaan/".concat(e)).then((function(e){a(e.data.data),console.log(e.data)})).catch((function(e){console.log(e.response.data)}))}}}]);
//# sourceMappingURL=58.655d7beb.chunk.js.map