{"version":3,"sources":["views/pages/Admin/Pensiun/EditPensiun.js","context/actions/Pensiun.js/editPensiun.js","context/actions/Pensiun.js/getPensiunById.js"],"names":["MySwal","withReactContent","swal2","EditPensiun","params","match","history","useHistory","useState","pensiun","setPensiun","loading","setLoading","useEffect","getPensiunById","id","initState","id_pegawai","tgl_pensiun","keterangan","showAlertSuccess","fire","icon","title","showConfirmButton","timer","then","res","push","showAlertError","message","err_message","key","text","result","validationSchema","Yup","shape","required","handleFormSubmit","values","axiosInstance","post","console","log","data","catch","err","response","errors","editPensiun","className","type","color","onClick","goBack","initialValues","enableReinitialize","onSubmit","touched","handleChange","handleBlur","handleSubmit","row","md","name","value","nama","readOnly","onChange","onBlur","placeholder","disabled","width","src","LoadAnimationWhite","alt","LoadAnimationBlue","get"],"mappings":"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","file":"static/js/77.8eb9b8ca.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport swal2 from \"sweetalert2\";\r\nimport withReactContent from \"sweetalert2-react-content\";\r\nimport * as Yup from \"yup\";\r\n\r\nimport {\r\n  CFormGroup,\r\n  CInput,\r\n  CLabel,\r\n  CCol,\r\n  CCard,\r\n  CCardBody,\r\n  CCardFooter,\r\n  CCardHeader,\r\n  CButton,\r\n  CForm,\r\n  CRow,\r\n} from \"@coreui/react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getPensiunById } from \"src/context/actions/Pensiun.js/getPensiunById\";\r\nimport { Formik } from \"formik\";\r\nimport { LoadAnimationBlue, LoadAnimationWhite } from \"src/assets\";\r\nimport { editPensiun } from \"src/context/actions/Pensiun.js/editPensiun\";\r\n\r\nconst MySwal = withReactContent(swal2);\r\n\r\nconst EditPensiun = ({ match }) => {\r\n  const params = match.params;\r\n  const history = useHistory();\r\n  const [pensiun, setPensiun] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const goBackToParent = () => {\r\n    history.goBack();\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Get pensiun by ID\r\n    getPensiunById(params.id, setPensiun);\r\n  }, [params]);\r\n\r\n  // Inisialisasi state formik\r\n  const initState = {\r\n    id_pegawai: pensiun ? pensiun.id_pegawai : \"\",\r\n    tgl_pensiun: pensiun ? pensiun.tgl_pensiun : \"\",\r\n    keterangan: pensiun ? pensiun.keterangan : \"\",\r\n  };\r\n\r\n  // Fungsi untuk menampilkan alert success Edit data\r\n  const showAlertSuccess = () => {\r\n    MySwal.fire({\r\n      icon: \"success\",\r\n      title: \"Edit Data Berhasil\",\r\n      showConfirmButton: false,\r\n      timer: 1500,\r\n    }).then((res) => {\r\n      history.push(\"/epekerja/admin/pensiun\");\r\n    });\r\n  };\r\n\r\n  // Fungsi untuk menampilkan alert error Edit data\r\n  const showAlertError = (message) => {\r\n    let err_message = \"\";\r\n\r\n    for (const key in message) {\r\n      err_message += `${message[key]}, `;\r\n    }\r\n\r\n    MySwal.fire({\r\n      icon: \"error\",\r\n      title: \"Edit Data Gagal\",\r\n      text: err_message,\r\n    }).then((result) => {\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  // Setting validasi form menggunakan YUP & FORMIK\r\n  const validationSchema = Yup.object().shape({\r\n    id_pegawai: Yup.string().required(\"Pegawai harus diisi\"),\r\n    tgl_pensiun: Yup.string().required(\"Tanggal pensiun harus diisi\"),\r\n    keterangan: Yup.string().required(\"Keterangan / alasan harus diisi\"),\r\n  });\r\n\r\n  const handleFormSubmit = (values) => {\r\n    editPensiun(\r\n      params.id,\r\n      values,\r\n      setLoading,\r\n      showAlertSuccess,\r\n      showAlertError\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CCard>\r\n        <CCardHeader className=\"d-flex justify-content-between\">\r\n          <h3>Edit Data Pensiun</h3>\r\n          <CButton\r\n            type=\"button\"\r\n            color=\"warning\"\r\n            className=\"text-white\"\r\n            onClick={goBackToParent}\r\n          >\r\n            Kembali\r\n          </CButton>\r\n        </CCardHeader>\r\n        {!pensiun ? (\r\n          <div>\r\n            <CRow>\r\n              <CCol className=\"text-center\">\r\n                <img\r\n                  className=\"my-4 ml-3\"\r\n                  width={30}\r\n                  src={LoadAnimationBlue}\r\n                  alt=\"load-animation\"\r\n                />\r\n              </CCol>\r\n            </CRow>\r\n          </div>\r\n        ) : (\r\n          <Formik\r\n            initialValues={initState}\r\n            validationSchema={validationSchema}\r\n            enableReinitialize={true}\r\n            onSubmit={(values) => handleFormSubmit(values)}\r\n          >\r\n            {({\r\n              values,\r\n              errors,\r\n              touched,\r\n              handleChange,\r\n              handleBlur,\r\n              handleSubmit,\r\n            }) => (\r\n              <CForm onSubmit={handleSubmit}>\r\n                <CCardBody>\r\n                  <CFormGroup row>\r\n                    <CCol md=\"2\">\r\n                      <CLabel>Nama Pegawai</CLabel>\r\n                    </CCol>\r\n                    <CCol>\r\n                      <CInput\r\n                        type=\"text\"\r\n                        name=\"nama\"\r\n                        value={pensiun.nama}\r\n                        readOnly\r\n                      />\r\n                    </CCol>\r\n                  </CFormGroup>\r\n\r\n                  <CFormGroup row>\r\n                    <CCol md=\"2\">\r\n                      <CLabel>Tgl. Pensiun</CLabel>\r\n                    </CCol>\r\n                    <CCol>\r\n                      <CInput\r\n                        type=\"date\"\r\n                        name=\"tgl_pensiun\"\r\n                        id=\"tgl_pensiun\"\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                        value={values.tgl_pensiun || \"\"}\r\n                        placeholder=\"Masukkan tgl. pensiun\"\r\n                        className={\r\n                          errors.tgl_pensiun && touched.tgl_pensiun\r\n                            ? \"is-invalid\"\r\n                            : null\r\n                        }\r\n                      />\r\n                      {errors.tgl_pensiun && touched.tgl_pensiun && (\r\n                        <div className=\"invalid-feedback\">\r\n                          {errors.tgl_pensiun}\r\n                        </div>\r\n                      )}\r\n                    </CCol>\r\n                  </CFormGroup>\r\n                  <CFormGroup row>\r\n                    <CCol md=\"2\">\r\n                      <CLabel>Keterangan</CLabel>\r\n                    </CCol>\r\n                    <CCol>\r\n                      <CInput\r\n                        type=\"text\"\r\n                        name=\"keterangan\"\r\n                        id=\"keterangan\"\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                        value={values.keterangan || \"\"}\r\n                        placeholder=\"Masukkan keterangan / alasan pensiun\"\r\n                        className={\r\n                          errors.keterangan && touched.keterangan\r\n                            ? \"is-invalid\"\r\n                            : null\r\n                        }\r\n                      />\r\n                      {errors.keterangan && touched.keterangan && (\r\n                        <div className=\"invalid-feedback\">\r\n                          {errors.keterangan}\r\n                        </div>\r\n                      )}\r\n                    </CCol>\r\n                  </CFormGroup>\r\n                </CCardBody>\r\n                <CCardFooter>\r\n                  <CButton\r\n                    color=\"primary\"\r\n                    type=\"submit\"\r\n                    className=\"mr-1\"\r\n                    disabled={loading ? true : false}\r\n                  >\r\n                    {loading ? (\r\n                      <img\r\n                        width={21}\r\n                        src={LoadAnimationWhite}\r\n                        alt=\"load-animation\"\r\n                      />\r\n                    ) : (\r\n                      \"Simpan\"\r\n                    )}\r\n                  </CButton>\r\n                </CCardFooter>\r\n              </CForm>\r\n            )}\r\n          </Formik>\r\n        )}\r\n      </CCard>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditPensiun;\r\n","import axiosInstance from \"src/helpers/axios\";\r\n\r\nexport const editPensiun = (\r\n  id,\r\n  values,\r\n  setLoading,\r\n  showAlertSuccess,\r\n  showAlertError\r\n) => {\r\n  setLoading(true);\r\n\r\n  axiosInstance\r\n    .post(`admin/pensiun/${id}`, values)\r\n    .then((res) => {\r\n      console.log(res.data);\r\n      setLoading(false);\r\n      showAlertSuccess();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response.data);\r\n      showAlertError(err.response.data.errors);\r\n    });\r\n};\r\n","import axiosInstance from \"src/helpers/axios\";\r\n\r\nexport const getPensiunById = (id, setPensiun) => {\r\n  axiosInstance\r\n    .get(`admin/pensiun/${id}`)\r\n    .then((res) => {\r\n      setPensiun(res.data.data);\r\n      console.log(res.data);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response.data);\r\n    });\r\n};\r\n"],"sourceRoot":""}