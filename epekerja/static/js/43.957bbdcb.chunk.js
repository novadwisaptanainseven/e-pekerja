(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[43],{1011:function(e,t,a){"use strict";a.r(t);var n=a(166),c=a(2),r=a(9),s=a(587),i=a(637),l=a(627),o=a(1),d=a(738),j=a(40),b=a(626),u=function(e,t){t({type:j.LOADING}),b.a.get("user/pegawai/".concat(e,"/berkas-kp")).then((function(e){console.log(e.data),t({type:j.SUCCESS,payload:e.data.data})})).catch((function(e){console.log(e.response.data),t({type:j.ERROR,payload:e.response.data})}))},h=function(e,t,a,n,c){n(!0),b.a.post("user/pegawai/".concat(e,"/berkas-kp"),t,{header:{"Content-Type":"multipart/form-data; boundary=".concat(t._boundary)}}).then((function(t){console.log(t.data),u(e,a),n(!1),c.fire({icon:"success",title:"Sukses",text:"Upload Berkas Berhasil"})})).catch((function(e){console.log(e.response.data),n(!1);var t=e.response.data.errors;c.fire({icon:"error",title:"Upload Gagal",text:t})}))},O=function(e,t,a,n){b.a.delete("user/pegawai/".concat(e,"/berkas-kp/").concat(t)).then((function(t){console.log(t.data),u(e,a),n.fire({icon:"success",title:"Sukses",text:"Berhasil Menghapus Berkas"})})).catch((function(e){console.log(e.response.data),n.fire({icon:"error",title:"Gagal",text:"Gagal Menghapus Berkas. Terjadi Kesalahan Server"})}))},x=a(163),k=a(649),p=a(646),f=a(653),g=a(631),m=a.n(g),y=a(632),v=a.n(y),_=a(17),B=v()(m.a);t.default=function(){var e=Object(o.useContext)(x.a),t=e.berkasKpState,a=e.berkasKpDispatch,j=e.userState,b=t.data,g=j.data,m=Object(o.useState)(!1),y=Object(r.a)(m,2),v=y[0],S=y[1],w=Object(o.useState)({error:""}),N=Object(r.a)(w,2),C=N[0],A=N[1];Object(o.useEffect)((function(){g&&u(g.id_pegawai,a)}),[a,g]);return Object(_.jsx)("div",{children:Object(_.jsxs)(l.h,{children:[Object(_.jsx)(l.l,{children:Object(_.jsx)("h3",{children:"Kenaikan Pangkat"})}),Object(_.jsx)(l.i,{children:b?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(l.a,{color:"info",closeButton:!0,fade:!0,children:"Silahkan upload berkas sesuai dengan persyaratan dan jenis kenaikan pangkat (Reguler, Jabatan Struktural, Jabatan Fungsional)"}),Object(_.jsxs)(l.x,{className:"mb-4",children:[Object(_.jsxs)(l.y,{className:"d-flex",style:{width:"400px",marginBottom:0},children:[Object(_.jsx)(l.E,{type:"file",name:"berkas",multiple:!0,onChange:function(e){return function(e){var t;0===e.target.files.length?A(Object(c.a)(Object(c.a)({},C),{},{error:"Berkas belum dipilih"})):A(Object(c.a)(Object(c.a)({},C),{},(t={},Object(n.a)(t,e.target.name,e.target.files),Object(n.a)(t,"error",""),t)))}(e)},className:C.error?"is-invalid":null}),Object(_.jsx)(l.f,{color:"primary",className:"ml-2",onClick:function(){var e=new FormData;C.berkas?0===C.berkas.length?A(Object(c.a)(Object(c.a)({},C),{},{error:"Berkas belum dipilih"})):(A(Object(c.a)(Object(c.a)({},C),{},{error:""})),Array.from(C.berkas).forEach((function(t,a){e.append("berkas_kp[".concat(a,"]"),t)})),h(g.id_pegawai,e,a,S,B)):A(Object(c.a)(Object(c.a)({},C),{},{error:"Berkas belum dipilih"}))},disabled:!!v,children:v?Object(_.jsx)(f.a,{}):"Upload"})]}),C.error&&Object(_.jsx)("div",{className:"text-danger",children:C.error})]}),b.berkas_kp.length>0&&Object(_.jsxs)(_.Fragment,{children:[0===b.kenaikan_pangkat.status_validasi&&Object(_.jsx)("table",{className:"table table-bordered",children:Object(_.jsx)("tbody",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{children:"Status"}),Object(_.jsx)("td",{children:Object(_.jsx)(l.b,{color:"danger",children:"Menunggu persetujuan admin"})})]})})}),1===b.kenaikan_pangkat.status_validasi&&Object(_.jsx)("table",{className:"table table-bordered",children:Object(_.jsx)("tbody",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{children:"Status"}),Object(_.jsx)("td",{children:Object(_.jsx)(l.b,{color:"success",children:"Berkas Anda telah disetujui"})})]})})}),2===b.kenaikan_pangkat.status_validasi&&Object(_.jsx)("table",{className:"table table-bordered",children:Object(_.jsxs)("tbody",{children:[Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{children:"Status"}),Object(_.jsx)("td",{children:Object(_.jsx)(l.b,{color:"danger",children:"Berkas Anda belum disetujui"})})]}),Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{children:"Keterangan"}),Object(_.jsx)("td",{children:b.kenaikan_pangkat.ket_status_validasi})]})]})})]}),Object(_.jsxs)("table",{className:"table",children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{children:"No"}),Object(_.jsx)("th",{children:"Berkas"}),Object(_.jsx)("th",{children:"Aksi"})]})}),Object(_.jsx)("tbody",{children:b.berkas_kp.map((function(e,t){return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{width:80,children:t+1}),Object(_.jsx)("td",{children:Object(_.jsx)("a",{href:Object(d.a)(e.file),target:"_blank",rel:"noreferrer",children:Object(k.a)(e.file)})}),Object(_.jsx)("td",{children:Object(_.jsx)(l.f,{color:"danger",onClick:function(){return t=e.id_berkas_kp,void B.fire({icon:"error",title:"Anda yakin ingin menghapus data ini ?",text:"Jika yakin, klik YA",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"YA"}).then((function(e){e.isConfirmed&&O(g.id_pegawai,t,a,B)}));var t},children:Object(_.jsx)(i.a,{content:s.a})})})]},t)})}))})]})]}):Object(_.jsx)(p.a,{})})]})})}},646:function(e,t,a){"use strict";var n=a(627),c=(a(1),a(629)),r=a(17);t.a=function(){return Object(r.jsx)(n.X,{className:"mb-3",children:Object(r.jsx)(n.n,{className:"text-center",children:Object(r.jsx)("img",{className:"mt-4 ml-3",width:30,src:c.d,alt:"load-animation"})})})}},649:function(e,t,a){"use strict";t.a=function(e){var t=e.split("/");return t[t.length-1]}},653:function(e,t,a){"use strict";a(1);var n=a(629),c=a(17);t.a=function(){return Object(c.jsx)("img",{width:21,src:n.e,alt:"load-animation"})}},738:function(e,t,a){"use strict";t.a=function(e){var t=e.split("/"),a=t[t.length-1];return"".concat(localStorage.baseURL,"berkas-kp/").concat(a)}}}]);
//# sourceMappingURL=43.957bbdcb.chunk.js.map