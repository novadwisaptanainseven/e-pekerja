(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[31],{1016:function(e,a,n){"use strict";n.r(a);var t=n(2),i=n(9),c=n(656),l=n(587),s=n(571),r=n(637),o=n(628),d=n(748),j=n(1),u=n(641),b=n.n(u),p=n(20),h=n(643),g=n(699),k=n(651),m=n(676),f=n(647),O=n(638),x=n(634),_=n(661),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{id_golongan:e?e.id_golongan:"",keterangan:e?e.keterangan:"",golongan:e?e.golongan:"",jenis_kp:e?e.jenis_kp:"",no_sk:e?e.no_sk:"",tanggal:e?e.tanggal:"",mk_tahun:e?parseInt(e.mk_tahun):"",mk_bulan:e?parseInt(e.mk_bulan):"",pejabat_penetap:e?e.pejabat_penetap:"",pangkat_terkini:e?e.pangkat_terkini:"",tmt_kenaikan_pangkat:e?e.tmt_kenaikan_pangkat:"",file:void 0}},y=n(635),w=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],C=y.c().shape({jenis_kp:y.e().required("Jenis kenaikan pangkat harus diisi"),no_sk:y.e().required("No. SK harus diisi"),tanggal:y.e().required("Tanggal kenaikan pangkat harus diisi"),tmt_kenaikan_pangkat:y.e().required("TMT. Kenaikan pangkat harus diisi"),pejabat_penetap:y.e().required("Pejabata penetap harus diisi"),mk_tahun:y.e().required("Tahun harus diisi"),mk_bulan:y.e().required("Bulan harus diisi"),file:y.a().test("size","Kapasitas file maksimal 5 mb",(function(e){return!e||e&&e.size<=5048e3})).test("type","Ekstensi yang diperbolehkan hanya pdf, doc, dan docx",(function(e){return!e||e&&w.includes(e.type)}))}),N=n(631),B=n.n(N),E=n(632),T=n.n(E),S=n(17),M=T()(B.a),P=function(e){var a=e.modalEdit,n=e.setModalEdit,c=e.setLoadingGolongan,l=e.setDataGolongan,s=Object(j.useState)(""),r=Object(i.a)(s,2),d=r[0],u=r[1],b=Object(j.useState)(""),p=Object(i.a)(b,2),h=p[0],m=p[1],f=Object(j.useState)(""),y=Object(i.a)(f,2),w=y[0],N=y[1],B=Object(j.useState)(!1),E=Object(i.a)(B,2),T=E[0],P=E[1],K=Object(j.useState)(!1),L=Object(i.a)(K,2),D=L[0],G=L[1];console.log(T),Object(j.useEffect)((function(){a.id&&Object(g.d)(a.id,N,P)}),[a]);var z=Object(j.useCallback)((function(){if(h){var e=h.name;u(e)}else u(a.data?Object(k.a)(a.data.file):"")}),[h,a]);Object(j.useEffect)((function(){z()}),[z]),Object(j.useEffect)((function(){a.id&&(a.data.mk_tahun=A(a.data.masa_kerja).tahun,a.data.mk_bulan=A(a.data.masa_kerja).bulan,a.data.file=w.file,console.log(a.data))}),[a,w]);var A=function(e){var a=e.split(" ");return{tahun:a[0],bulan:a[2]}},R=function(){M.fire({icon:"success",title:"Edit Data Berhasil",showConfirmButton:!1,timer:1500}).then((function(e){n(Object(t.a)(Object(t.a)({},a),{},{id:"",modal:!1,data:""}))}))},q=function(e){var a="";for(var n in e)a+="".concat(e[n],", ");M.fire({icon:"error",title:"Edit Data Gagal",text:a}).then((function(e){P(!1)}))},F=Object(j.memo)((function(e){var a=e.values,n=e.handleChange,t=e.handleBlur;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("input",{type:"checkbox",name:"pangkat_terkini",checked:1===a.pangkat_terkini||"on"===a.pangkat_terkini[0],className:"ml-2",onChange:n,onBlur:t})})}));return Object(S.jsxs)(o.N,{show:a.modal,onClose:function(){return n(Object(t.a)(Object(t.a)({},a),{},{modal:!1,id:"",data:""}))},children:[Object(S.jsx)(o.Q,{closeButton:!0,children:Object(S.jsx)(o.R,{children:"Edit Riwayat Golongan"})}),Object(S.jsx)(x.a,{initialValues:v(a.data),validationSchema:C,enableReinitialize:!0,onSubmit:function(e){var a=new FormData,n="".concat(e.mk_tahun," Tahun ").concat(e.mk_bulan," Bulan"),t=1===e.pangkat_terkini||"on"===e.pangkat_terkini[0]?1:0;a.append("id_golongan",e.id_golongan),a.append("jenis_kp",e.jenis_kp),a.append("no_sk",e.no_sk),a.append("tanggal",e.tanggal),a.append("masa_kerja",n),a.append("pejabat_penetap",e.pejabat_penetap),a.append("pangkat_terkini",t),a.append("tmt_kenaikan_pangkat",e.tmt_kenaikan_pangkat),e.file&&a.append("file",e.file);var i,s=Object(O.a)(a.entries());try{for(s.s();!(i=s.n()).done;){var r=i.value;console.log(r)}}catch(o){s.e(o)}finally{s.f()}Object(g.b)(w.id_pegawai,w.id_rw_golongan,a,G,R,q,c,l)},children:function(e){var i=e.values,c=e.errors,l=e.touched,s=e.handleChange,r=e.handleBlur,j=e.handleSubmit,u=e.setFieldValue;return Object(S.jsxs)(o.x,{onSubmit:j,children:[Object(S.jsxs)(o.O,{children:[Object(S.jsxs)(o.y,{children:[Object(S.jsx)(o.L,{children:"Jenis Kenaikan Pangkat"}),Object(S.jsx)(o.E,{readOnly:!0,type:"text",value:i.jenis_kp})]}),Object(S.jsxs)(o.y,{children:[Object(S.jsx)(o.L,{children:"Golongan"}),Object(S.jsx)(o.E,{readOnly:!0,type:"text",value:"".concat(i.keterangan," (").concat(i.golongan,")")})]}),Object(S.jsx)(o.y,{children:Object(S.jsxs)(o.X,{children:[Object(S.jsxs)(o.n,{children:[Object(S.jsx)(o.L,{children:"No. SK"}),Object(S.jsx)(o.E,{type:"text",name:"no_sk",onChange:s,onBlur:r,value:i.no_sk,className:c.no_sk&&l.no_sk?"is-invalid":null}),c.no_sk&&l.no_sk&&Object(S.jsx)("div",{className:"invalid-feedback",children:c.no_sk})]}),Object(S.jsxs)(o.n,{children:[Object(S.jsx)(o.L,{children:"Tgl. Kenaikan Pangkat"}),Object(S.jsx)(o.E,{type:"date",name:"tanggal",onChange:s,onBlur:r,value:i.tanggal,className:c.tanggal&&l.tanggal?"is-invalid":null}),c.tanggal&&l.tanggal&&Object(S.jsx)("div",{className:"invalid-feedback",children:c.tanggal})]})]})}),Object(S.jsxs)(o.y,{children:[Object(S.jsx)(o.L,{children:"TMT. Kenaikan Pangkat"}),Object(S.jsx)(o.E,{type:"date",name:"tmt_kenaikan_pangkat",onChange:s,onBlur:r,value:i.tmt_kenaikan_pangkat,className:c.tmt_kenaikan_pangkat&&l.tmt_kenaikan_pangkat?"is-invalid":null}),c.tmt_kenaikan_pangkat&&l.tmt_kenaikan_pangkat&&Object(S.jsx)("div",{className:"invalid-feedback",children:c.tmt_kenaikan_pangkat})]}),Object(S.jsxs)(o.y,{children:[Object(S.jsx)(o.L,{children:"Pejabat Penetap"}),Object(S.jsx)(o.E,{type:"text",name:"pejabat_penetap",onChange:s,onBlur:r,value:i.pejabat_penetap,className:c.pejabat_penetap&&l.pejabat_penetap?"is-invalid":null}),c.pejabat_penetap&&l.pejabat_penetap&&Object(S.jsx)("div",{className:"invalid-feedback",children:c.pejabat_penetap})]}),Object(S.jsx)(o.y,{children:Object(S.jsxs)(o.X,{children:[Object(S.jsxs)(o.n,{children:[Object(S.jsx)(o.L,{children:"Masa Kerja Golongan"}),Object(S.jsx)(o.E,{type:"number",name:"mk_tahun",min:"0",onChange:s,onBlur:r,value:i.mk_tahun,placeholder:"Tahun",className:c.mk_tahun&&l.mk_tahun?"is-invalid":null}),Object(S.jsx)(o.z,{children:"Tahun"}),c.mk_tahun&&l.mk_tahun&&Object(S.jsx)("div",{className:"invalid-feedback",children:c.mk_tahun})]}),Object(S.jsxs)(o.n,{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-start"},children:[Object(S.jsx)(o.E,{type:"number",name:"mk_bulan",min:"0",onChange:s,onBlur:r,value:i.mk_bulan,placeholder:"Bulan",className:c.mk_bulan&&l.mk_bulan?"is-invalid":null}),Object(S.jsx)(o.z,{children:"Bulan"}),c.mk_bulan&&l.mk_bulan&&Object(S.jsx)("div",{className:"invalid-feedback",children:c.mk_bulan})]})]})}),Object(S.jsxs)(o.y,{children:[Object(S.jsx)(o.L,{children:"Pangkat Terkini"}),Object(S.jsx)(F,{values:i,handleChange:s,handleBlur:r}),Object(S.jsx)(o.z,{children:"Cek apabila merupakan pangkat Anda saat ini"}),c.pejabat_penetap&&l.pejabat_penetap&&Object(S.jsx)("div",{className:"invalid-feedback",children:c.pejabat_penetap})]}),Object(S.jsxs)(o.y,{children:[Object(S.jsx)(o.L,{children:"File"}),Object(S.jsx)(o.E,{type:"file",name:"file",onChange:function(e){u("file",e.target.files[0]),function(e){e.target.files&&0!==e.target.files.length?m(e.target.files[0]):m(void 0)}(e)},onBlur:r,className:c.file&&l.file?"is-invalid":null}),Object(S.jsx)(o.z,{children:d}),c.file&&l.file&&Object(S.jsx)("div",{className:"invalid-feedback",children:c.file})]})]}),Object(S.jsxs)(o.P,{children:[Object(S.jsx)(o.f,{type:"submit",color:"primary",disabled:!!D,children:D?Object(S.jsx)(_.a,{}):"Simpan"}),Object(S.jsx)(o.f,{type:"button",color:"secondary",onClick:function(){return n(Object(t.a)(Object(t.a)({},a),{},{modal:!1,id:"",data:""}))},children:"Batal"})]})]})}})]})},K=T()(B.a);a.default=function(){var e=Object(p.i)().params,a=Object(p.g)(),n=Object(j.useState)(""),u=Object(i.a)(n,2),O=u[0],x=u[1],_=Object(j.useState)(!1),v=Object(i.a)(_,2),y=v[0],w=v[1],C=Object(j.useState)({id:"",data:"",modal:!1}),N=Object(i.a)(C,2),B=N[0],E=N[1];console.log(y),Object(j.useEffect)((function(){Object(g.c)(e.id,x,w)}),[e]);var T=[{name:"No",selector:function(e){return e.no},sortable:!0,wrap:!0,width:"80px"},{name:"Golongan",wrap:!0,cell:function(e){return Object(S.jsxs)("div",{children:[e.keterangan," (",e.golongan,")"]})}},{name:"No. SK",selector:function(e){return e.no_sk},wrap:!0},{name:"Masa Kerja",selector:function(e){return e.masa_kerja},wrap:!0},{name:"TMT",selector:function(e){return e.tmt_kenaikan_pangkat},wrap:!0,cell:function(e){return Object(S.jsx)("div",{children:Object(d.a)(new Date(e.tmt_kenaikan_pangkat),"dd/MM/y")})}},{name:"Status",selector:function(e){return e.pangkat_terkini},sortable:!0,wrap:!0,cell:function(e){return Object(S.jsx)("div",{children:1===e.pangkat_terkini?Object(S.jsx)(o.b,{className:"p-1",color:"success",children:"Pangkat Terkini"}):""})}},{name:"Aksi",sortable:!0,wrap:!0,cell:function(e){return Object(S.jsx)("div",{"data-tag":"allowRowEvents",children:Object(S.jsxs)(o.g,{children:[Object(S.jsx)(o.f,{color:"info",size:"sm",onClick:function(){return E(Object(t.a)(Object(t.a)({},B),{},{modal:!0,id:e.id_rw_golongan,data:e}))},children:Object(S.jsx)(r.a,{content:c.a})}),Object(S.jsx)(o.f,{color:"danger",size:"sm",onClick:function(){return L(e.id_rw_golongan)},disabled:1===e.pangkat_terkini,children:Object(S.jsx)(r.a,{content:l.a})})]})})}}],M=function(e){var a=e.data;return Object(S.jsxs)("div",{style:{padding:"10px 63px"},children:[Object(S.jsxs)(o.X,{children:[Object(S.jsx)(o.n,{md:"3",children:Object(S.jsx)("strong",{children:"Jenis KP"})}),Object(S.jsx)(o.n,{children:a.jenis_kp})]}),Object(S.jsxs)(o.X,{children:[Object(S.jsx)(o.n,{md:"3",children:Object(S.jsx)("strong",{children:"Pejabat Penetap"})}),Object(S.jsx)(o.n,{children:a.pejabat_penetap})]}),Object(S.jsxs)(o.X,{children:[Object(S.jsx)(o.n,{md:"3",children:Object(S.jsx)("strong",{children:"Tanggal KP"})}),Object(S.jsx)(o.n,{children:Object(d.a)(new Date(a.tanggal),"dd/MM/y")})]}),Object(S.jsxs)(o.X,{children:[Object(S.jsx)(o.n,{md:"3",children:Object(S.jsx)("strong",{children:"File"})}),Object(S.jsx)(o.n,{children:a.file?Object(S.jsx)("a",{href:Object(h.b)(a.file),target:"_blank",rel:"noreferrer",children:Object(k.a)(a.file)}):"Belum ada file"})]})]})},L=function(a){K.fire({icon:"warning",title:"Anda yakin ingin menghapus data ini ?",text:"Jika yakin, klik YA",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"YA"}).then((function(n){n.isConfirmed&&Object(g.a)(e.id,a,x,w,K)}))},D=function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{children:[Object(S.jsxs)(o.f,{type:"button",color:"info",className:"ml-2",onClick:function(){return Object(h.e)(e.id)},children:["PDF ",Object(S.jsx)(r.a,{content:s.a})]}),Object(S.jsxs)(o.f,{type:"button",color:"success",className:"ml-2",onClick:function(){return Object(h.a)("riwayat-golongan/"+e.id)},children:["Excel ",Object(S.jsx)(r.a,{content:s.a})]})]})})};return Object(S.jsxs)("div",{children:[Object(S.jsxs)(o.h,{children:[Object(S.jsxs)(o.l,{className:"d-flex justify-content-between",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("h3",{children:"Riwayat Golongan"}),Object(S.jsx)("h4",{className:"font-weight-normal",children:O&&O.pegawai.nama})]}),Object(S.jsx)(o.f,{style:{height:"40px"},color:"warning",onClick:function(){return a.goBack()},children:"Kembali"})]}),Object(S.jsx)(o.i,{children:O?Object(S.jsx)(b.a,{columns:T,data:O.data,noHeader:!0,responsive:!0,customStyles:m.a,pagination:!0,subHeader:!0,subHeaderComponent:Object(S.jsx)(D,{}),expandableRows:!0,expandOnRowClicked:!0,expandableRowsComponent:Object(S.jsx)(M,{}),highlightOnHover:!0}):Object(S.jsx)(f.a,{})})]}),Object(S.jsx)(P,{modalEdit:B,setModalEdit:E,setLoadingGolongan:w,setDataGolongan:x})]})}},647:function(e,a,n){"use strict";var t=n(628),i=(n(1),n(629)),c=n(17);a.a=function(){return Object(c.jsx)(t.X,{className:"mb-3",children:Object(c.jsx)(t.n,{className:"text-center",children:Object(c.jsx)("img",{className:"mt-4 ml-3",width:30,src:i.c,alt:"load-animation"})})})}},651:function(e,a,n){"use strict";a.a=function(e){var a=e.split("/");return a[a.length-1]}},656:function(e,a,n){"use strict";n.d(a,"a",(function(){return t}));var t=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M345.994,42.019,179.531,208.481A646.3,646.3,0,0,0,25.325,456.521a24.845,24.845,0,0,0,6,25.708l.087.087a24.84,24.84,0,0,0,17.611,7.342,25.172,25.172,0,0,0,8.1-1.344,646.283,646.283,0,0,0,248.04-154.207L471.62,167.646A88.831,88.831,0,0,0,345.994,42.019ZM282.531,311.48A614.445,614.445,0,0,1,60.419,453.221,614.435,614.435,0,0,1,202.158,231.108l99.162-99.161,80.372,80.372ZM448.993,145.019l-44.674,44.673L323.947,109.32l44.674-44.674a56.832,56.832,0,1,1,80.372,80.373Z' class='ci-primary'/>"]},661:function(e,a,n){"use strict";n(1);var t=n(629),i=n(17);a.a=function(){return Object(i.jsx)("img",{width:21,src:t.d,alt:"load-animation"})}},676:function(e,a,n){"use strict";a.a={headCells:{style:{fontSize:"1.15em"}}}},699:function(e,a,n){"use strict";n.d(a,"c",(function(){return i})),n.d(a,"d",(function(){return c})),n.d(a,"e",(function(){return l})),n.d(a,"b",(function(){return s})),n.d(a,"a",(function(){return r}));var t=n(626),i=function(e,a,n){n(!0),t.a.get("admin/pegawai/".concat(e,"/riwayat-golongan")).then((function(e){a(e.data.data),n(!1),console.log(e.data)})).catch((function(e){n(!1),console.log(e.response.data)}))},c=function(e,a,n){n(!0),t.a.get("admin/riwayat-golongan/".concat(e)).then((function(e){a(e.data.data),n(!1),console.log(e.data)})).catch((function(e){n(!1),console.log(e.response.data)}))},l=function(e,a,n,c,l,s,r){n(!0),t.a.post("admin/pegawai/".concat(e,"/riwayat-golongan"),a,{header:{"Content-Type":"multipart/form-data; boundary=".concat(a._boundary)}}).then((function(a){console.log(a.data),n(!1),i(e,r,s),c()})).catch((function(e){console.log(e.response.data),n(!1),l(e.response.data.errors)}))},s=function(e,a,n,c,l,s,r,o){c(!0),t.a.post("admin/riwayat-golongan/".concat(a),n,{header:{"Content-Type":"multipart/form-data; boundary=".concat(n._boundary)}}).then((function(a){console.log(a.data),c(!1),i(e,o,r),l()})).catch((function(e){console.log(e.response.data),c(!1),s(e.response.data.errors)}))},r=function(e,a,n,c,l){t.a.delete("admin/riwayat-golongan/".concat(a)).then((function(a){i(e,n,c),console.log(a.data),l.fire({icon:"success",title:"Terhapus",text:"Data berhasil dihapus"})})).catch((function(e){console.log(e.response.data),l.fire({icon:"error",title:"Gagal",text:"Data gagal dihapus. Terjadi kesalahan"})}))}}}]);
//# sourceMappingURL=31.26bdf8b1.chunk.js.map