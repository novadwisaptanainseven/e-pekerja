(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[63],{1064:function(e,a,n){"use strict";n.r(a);var i=n(2),t=n(638),r=n(9),c=n(627),s=n(634),l=n(1),o=n.n(l),d=n(20),g=n(650),u=n(629),m=n(678),p=n(626),h=n(631),b=n.n(h),j=n(632),f=n.n(j),O=n(635),x=n(17),k=f()(b.a);a.default=function(){var e=Object(d.g)(),a=Object(l.useState)([]),n=Object(r.a)(a,2),h=n[0],b=n[1],j=Object(l.useState)(),f=Object(r.a)(j,2),v=f[0],_=f[1],w=Object(l.useState)(!1),y=Object(r.a)(w,2),C=y[0],S=y[1],N=Object(l.useState)(),E=Object(r.a)(N,2),P=E[0],B=E[1],F=Object(l.useState)(!1),z=Object(r.a)(F,2),G=z[0],D=z[1];Object(l.useEffect)((function(){Object(m.a)(b)}),[]);var L=o.a.useMemo((function(){return function(e){var a=[];return e.forEach((function(e){a.push({value:e.id_pegawai,label:e.nama})})),a}(h)}),[h]),M=Object(l.useCallback)((function(){if(v){var e=v.name;B(e)}else B(null)}),[v]);Object(l.useEffect)((function(){M()}),[M]);var R={id_pegawai:"",nama_penerima:"",nama_penghargaan:"",pemberi:"",tgl_penghargaan:"",dokumentasi:void 0},T=function(){k.fire({icon:"success",title:"Tambah Data Berhasil",showConfirmButton:!1,timer:1500}).then((function(a){e.push("/epekerja/admin/penghargaan")}))},q=function(e){var a="";for(var n in e)a+="".concat(e[n],", ");k.fire({icon:"error",title:"Tambah Data Gagal",text:a}).then((function(e){S(!1)}))},I=["application/pdf","image/jpg","image/jpeg","image/png"],W=O.c().shape({id_pegawai:O.e().required("Penerima harus diisi"),nama_penghargaan:O.e().required("Nama penghargaan harus diisi!"),pemberi:O.e().required("Pemberi harus diisi!"),tgl_penghargaan:O.e().required("Tanggal penghargaan harus diisi!"),dokumentasi:O.a().required("File belum dipilih").test("size","Kapasitas file maksimal 2 mb",(function(e){return e&&e.size<=2048e3})).test("type","Ekstensi yang diperbolehkan hanya pdf, jpg, jpeg, dan png",(function(e){return e&&I.includes(e.type)}))}),J=function(e){var a=new FormData;a.append("id_pegawai",e.id_pegawai),a.append("nama_penghargaan",e.nama_penghargaan),a.append("pemberi",e.pemberi),a.append("tgl_penghargaan",e.tgl_penghargaan),a.append("dokumentasi",e.dokumentasi);var n,i=Object(t.a)(a.entries());try{for(i.s();!(n=i.n()).done;){var r=n.value;console.log(r)}}catch(c){i.e(c)}finally{i.f()}!function(e,a,n,i){a(!0),p.a.post("admin/penghargaan",e,{header:{"Content-Type":"multipart/form-data; boundary=".concat(e._boundary)}}).then((function(e){console.log(e.data),a(!1),n()})).catch((function(e){console.log(e.response.data),i(e.response.data.errors)}))}(a,S,T,q)},K={control:function(e,a){return Object(i.a)(Object(i.a)({},e),{},{border:G?"1px solid #e55353":e.border})}};return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(c.h,{children:[Object(x.jsxs)(c.l,{className:"d-flex justify-content-between",children:[Object(x.jsx)("h3",{children:"Tambah Penghargaan"}),Object(x.jsx)(c.f,{type:"button",color:"warning",className:"text-white",onClick:function(){e.goBack()},children:"Kembali"})]}),Object(x.jsx)(s.a,{initialValues:R,validationSchema:W,onSubmit:function(e){return J(e)},children:function(e){var a=e.values,n=e.errors,i=e.touched,t=e.handleChange,r=e.handleBlur,s=e.handleSubmit,l=e.setFieldValue;return Object(x.jsxs)(c.x,{onSubmit:s,className:"form-horizontal",children:[Object(x.jsxs)(c.i,{children:[Object(x.jsxs)(c.y,{row:!0,children:[Object(x.jsx)(c.n,{md:"3",children:Object(x.jsx)(c.L,{children:"Nama penerima"})}),Object(x.jsxs)(c.n,{children:[Object(x.jsx)(g.a,{styles:K,name:"id_pegawai",id:"id_pegawai",onChange:function(e){D(!1),l("id_pegawai",e?e.value:"")},onFocus:function(){return D(!0)},placeholder:"-- Pilih Pegawai --",isSearchable:!0,isClearable:!0,options:L}),!a.id_pegawai&&G&&Object(x.jsx)("div",{className:"text-danger mt-1",style:{fontSize:"0.8em"},children:"Nama penerima harus diisi"})]})]}),Object(x.jsxs)(c.y,{row:!0,children:[Object(x.jsx)(c.n,{md:"3",children:Object(x.jsx)(c.L,{children:"Nama Penghargaan"})}),Object(x.jsxs)(c.n,{children:[Object(x.jsx)(c.E,{type:"text",name:"nama_penghargaan",id:"nama_penghargaan",placeholder:"Masukkan nama penghargaan ",onChange:t,onBlur:r,value:a.nama_penghargaan,className:n.nama_penghargaan&&i.nama_penghargaan?"is-invalid":null}),n.nama_penghargaan&&i.nama_penghargaan&&Object(x.jsx)("div",{className:"invalid-feedback",children:n.nama_penghargaan})]})]}),Object(x.jsxs)(c.y,{row:!0,children:[Object(x.jsx)(c.n,{md:"3",children:Object(x.jsx)(c.L,{children:"Pemberi"})}),Object(x.jsxs)(c.n,{children:[Object(x.jsx)(c.E,{type:"text",name:"pemberi",id:"pemberi",placeholder:"Masukkan nama penghargaan ",onChange:t,onBlur:r,value:a.pemberi,className:n.pemberi&&i.pemberi?"is-invalid":null}),n.pemberi&&i.pemberi&&Object(x.jsx)("div",{className:"invalid-feedback",children:n.pemberi})]})]}),Object(x.jsxs)(c.y,{row:!0,children:[Object(x.jsx)(c.n,{md:"3",children:Object(x.jsx)(c.L,{children:"Tgl. Penghargaan"})}),Object(x.jsxs)(c.n,{children:[Object(x.jsx)(c.E,{type:"date",id:"tgl_penghargaan",name:"tgl_penghargaan",placeholder:"Masukkan tanggal penghargaan",onChange:t,onBlur:r,value:a.tgl_penghargaan,className:n.tgl_penghargaan&&i.tgl_penghargaan?"is-invalid":null}),n.tgl_penghargaan&&i.tgl_penghargaan&&Object(x.jsx)("div",{className:"invalid-feedback",children:n.tgl_penghargaan})]})]}),Object(x.jsxs)(c.y,{row:!0,children:[Object(x.jsx)(c.n,{md:"3",children:Object(x.jsxs)(c.L,{children:["File Dokumentasi Penghargaan ",Object(x.jsx)("br",{})]})}),Object(x.jsxs)(c.n,{children:[Object(x.jsx)(c.E,{type:"file",name:"dokumentasi",id:"dokumentasi",onChange:function(e){!function(e){e.target.files&&0!==e.target.files.length?_(e.target.files[0]):_(void 0)}(e),l("dokumentasi",e.target.files[0])},onBlur:r,className:n.dokumentasi&&i.dokumentasi?"is-invalid":null}),n.dokumentasi&&i.dokumentasi&&Object(x.jsx)("div",{className:"invalid-feedback",children:n.dokumentasi}),P&&Object(x.jsx)("p",{className:"mt-1",children:P}),Object(x.jsx)(c.z,{className:"help-block",children:"File harus bertipe pdf, jpg, jpeg, atau png dengan ukuran kurang dari 2 MB"})]})]})]}),Object(x.jsx)(c.j,{children:Object(x.jsx)(c.f,{color:"primary",type:"submit",className:"mr-1",disabled:!!C,onClick:function(){a.id_pegawai?D(!1):D(!0)},children:C?Object(x.jsx)("img",{width:21,src:u.e,alt:"load-animation"}):"Simpan"})})]})}})]})})}},660:function(e,a,n){"use strict";a.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},678:function(e,a,n){"use strict";n.d(a,"a",(function(){return t}));var i=n(626),t=function(e){i.a.get("admin/pegawai/semua-pegawai").then((function(a){e(a.data.data)})).catch((function(e){}))}}}]);
//# sourceMappingURL=63.dbbb6ea8.chunk.js.map