(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[74],{1001:function(e,a,n){"use strict";n.r(a);var t=n(638),s=n(9),i=n(631),r=n.n(i),c=n(632),o=n.n(c),l=n(635),d=n(627),u=n(1),m=n(20),j=n(634),p=n(748),f=n(629),b=n(17),h=o()(r.a);a.default=function(){var e=Object(m.g)(),a=Object(u.useState)(!1),n=Object(s.a)(a,2),i=n[0],r=n[1],c=Object(u.useState)(),o=Object(s.a)(c,2),O=o[0],x=o[1],g=Object(u.useState)(),v=Object(s.a)(g,2),k=v[0],w=v[1],y=Object(u.useCallback)((function(){if(O){var e=URL.createObjectURL(O);return w(e),function(){URL.revokeObjectURL(e)}}w(null)}),[O]);Object(u.useEffect)((function(){y()}),[y]);var N={name:"",username:"",password:"",foto_profil:void 0},_=function(){h.fire({icon:"success",title:"Tambah Data Berhasil",showConfirmButton:!1,timer:1500}).then((function(a){e.push("/epekerja/admin/users")}))},B=function(e){var a="";for(var n in e)a+="".concat(e[n],", ");h.fire({icon:"error",title:"Tambah Data Gagal",text:a}).then((function(e){r(!1)}))},C=["image/jpg","image/jpeg","image/png"],L=l.c().shape({name:l.e().required("Nama harus diisi"),username:l.e().required("Username harus diisi"),password:l.e().required("Password harus diisi"),foto_profil:l.a().required("File belum dipilih").test("size","Kapasitas file maksimal 2 mb",(function(e){return e&&e.size<=2048e3})).test("type","Ekstensi yang diperbolehkan hanya jpg, jpeg, dan png",(function(e){return e&&C.includes(e.type)}))});return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(d.h,{children:[Object(b.jsxs)(d.l,{className:"d-flex justify-content-between",children:[Object(b.jsx)("h3",{children:"Tambah Administrator"}),Object(b.jsx)(d.f,{type:"button",color:"warning",className:"text-white",onClick:function(){e.goBack()},children:"Kembali"})]}),Object(b.jsx)(j.a,{initialValues:N,validationSchema:L,onSubmit:function(e){return function(e){var a=new FormData;a.append("name",e.name),a.append("username",e.username),a.append("password",e.password),a.append("level",1),a.append("foto_profil",e.foto_profil);var n,s=Object(t.a)(a.entries());try{for(s.s();!(n=s.n()).done;){var i=n.value;console.log(i)}}catch(c){s.e(c)}finally{s.f()}Object(p.a)(a,r,_,B)}(e)},children:function(e){var a=e.values,n=e.errors,t=e.touched,s=e.handleChange,r=e.handleBlur,c=e.handleSubmit,o=e.setFieldValue;return Object(b.jsxs)(d.x,{onSubmit:c,children:[Object(b.jsx)(d.i,{children:Object(b.jsx)(d.X,{children:Object(b.jsxs)(d.n,{md:"6",children:[Object(b.jsxs)(d.y,{children:[Object(b.jsx)(d.L,{children:"Nama"}),Object(b.jsx)(d.E,{type:"text",id:"name",name:"name",placeholder:"Masukkan nama user administrator",onChange:s,onBlur:r,value:a.name||"",className:n.name&&t.name?"is-invalid":null}),n.name&&t.name&&Object(b.jsx)("div",{className:"invalid-feedback",children:n.name})]}),Object(b.jsxs)(d.y,{children:[Object(b.jsx)(d.L,{children:"Username"}),Object(b.jsx)(d.E,{type:"text",id:"username",name:"username",placeholder:"Masukkan username",onChange:s,onBlur:r,value:a.username||"",className:n.username&&t.username?"is-invalid":null}),n.username&&t.username&&Object(b.jsx)("div",{className:"invalid-feedback",children:n.username})]}),Object(b.jsxs)(d.y,{children:[Object(b.jsx)(d.L,{children:"Password"}),Object(b.jsx)(d.E,{type:"password",id:"password",name:"password",placeholder:"Masukkan password",onChange:s,onBlur:r,value:a.password||"",className:n.password&&t.password?"is-invalid":null}),n.password&&t.password&&Object(b.jsx)("div",{className:"invalid-feedback",children:n.password})]}),Object(b.jsxs)(d.y,{children:[Object(b.jsx)(d.L,{children:"Foto Profil"}),Object(b.jsx)(d.E,{type:"file",id:"foto_profil",name:"foto_profil",placeholder:"Masukkan foto profil",onChange:function(e){!function(e){e.target.files&&0!==e.target.files.length?x(e.target.files[0]):x(void 0)}(e),o("foto_profil",e.target.files[0])},onBlur:r,className:n.foto_profil&&t.foto_profil?"is-invalid":null}),n.foto_profil&&t.foto_profil&&Object(b.jsx)("div",{className:"invalid-feedback",children:n.foto_profil}),k&&Object(b.jsx)("img",{src:k,alt:k,className:"img-thumbnail mt-2 mb-1",width:200}),Object(b.jsx)(d.z,{className:"help-block",children:"File harus bertipe jpg, jpeg, atau png dengan ukuran kurang dari 2 MB"})]})]})})}),Object(b.jsx)(d.j,{children:Object(b.jsx)(d.f,{type:"submit",color:"primary",className:"mr-1",disabled:!!i,children:i?Object(b.jsx)("img",{width:21,src:f.e,alt:"load-animation"}):"Simpan"})})]})}})]})})}},748:function(e,a,n){"use strict";n.d(a,"a",(function(){return s}));var t=n(626),s=function(e,a,n,s){a(!0),t.a.post("admin/users",e,{header:{"Content-Type":"multipart/form-data; boundary=".concat(e._boundary)}}).then((function(e){console.log(e.data),a(!1),n()})).catch((function(e){console.log(e.response.data),s(e.response.data.errors)}))}}}]);
//# sourceMappingURL=74.9ecf8282.chunk.js.map