(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[41],{1003:function(e,t,a){"use strict";a.r(t);var n,c,s=a(2),r=a(10),i=a(638),o=a(1),l=a.n(o),d=a(628),b=a(641),j=a.n(b),u=a(639),h=a(571),x=(a(785),a(786),a(787)),p=a(738),m=a(643),O=a(163),f=a(40),g=a(626),w=a(630),k=a(677),v=a(734),C=a(640),D=a(17),y=m.default.input(n||(n=Object(i.a)(["\n  height: 37px;\n  width: 200px;\n  border-radius: 3px;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border: 1px solid #e5e5e5;\n  padding: 0 32px 0 16px;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]))),N=m.default.button(c||(c=Object(i.a)(["\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  height: 37px;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #3e5973;\n  border: none;\n  color: white;\n  padding: 0 10px;\n  transition: 0.3s;\n\n  &:hover {\n    background-color: #283c4f;\n  }\n"]))),S=function(e){var t=e.filterText,a=e.onFilter,n=e.onClear;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(y,{id:"search",type:"text",placeholder:"Cari pegawai","aria-label":"Search Input",value:t,onChange:a}),Object(D.jsx)(N,{type:"button",onClick:n,children:"Reset"})]})},R=function(e){var t=e.handleDateChange,a=e.state;return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(x.DateRange,{editableDateInputs:!0,onChange:function(e){return t(e)},moveRangeOnFirstSelection:!1,ranges:a})})},_=l.a.memo(R);t.default=function(){var e=Object(o.useState)(""),t=Object(r.a)(e,2),a=t[0],n=t[1],c=Object(o.useState)(!1),i=Object(r.a)(c,2),b=i[0],x=i[1],m=Object(o.useState)((new Date).getFullYear()),y=Object(r.a)(m,2),N=y[0],R=y[1],E=Object(o.useState)(!1),F=Object(r.a)(E,2),U=F[0],A=F[1],L=Object(o.useContext)(O.a),W=L.rekapAbsensiState,T=L.rekapAbsensiDispatch,P=W.data,z=W.loading,M=Object(o.useState)([{startDate:new Date,endDate:new Date,key:"selection"}]),H=Object(r.a)(M,2),I=H[0],K=H[1],Y=Object(o.useState)({startDate:"",endDate:""}),J=Object(r.a)(Y,2),B=J[0],G=J[1];Object(o.useEffect)((function(){var e,t;N&&(t=N,(e=T)({type:f.LOADING}),g.a.get("admin/pegawai/rekap-absensi?tahun=".concat(t)).then((function(t){e({type:f.SUCCESS,payload:t.data.data}),console.log(t.data)})).catch((function(t){e({type:f.ERROR}),console.log(t.response.data)})),G({startDate:"",endDate:""}))}),[T,N]),Object(o.useEffect)((function(){var e,t;B.startDate&&B.endDate&&(t=B,(e=T)({type:f.LOADING}),g.a.get("admin/pegawai/rekap-absensi-tanggal?first_date=".concat(t.startDate,"&last_date=").concat(t.endDate)).then((function(t){e({type:f.SUCCESS,payload:t.data.data}),console.log(t.data)})).catch((function(t){e({type:f.ERROR}),console.log(t.response.data)})),R(""))}),[B,T]);var X=P.filter((function(e){return!(!e.nama||!e.nama.toLowerCase().includes(a.toLowerCase()))})),q=[{name:"Nama",selector:"nama",sortable:!0,wrap:!0},{name:"Jabatan",selector:"jabatan",sortable:!0,wrap:!0},{name:"Hadir",selector:"hadir",sortable:!0,wrap:!0,maxWidth:"80px"},{name:"Izin",selector:"izin",sortable:!0,wrap:!0,maxWidth:"80px"},{name:"Sakit",selector:"sakit",sortable:!0,wrap:!0,maxWidth:"80px"},{name:"Cuti",selector:"cuti",sortable:!0,wrap:!0,maxWidth:"80px"},{name:"Tanpa Keterangan",selector:"tanpa_keterangan",sortable:!0,wrap:!0,maxWidth:"200px"},{maxWidth:"180px",name:"Action",sortable:!0,cell:function(e){return Object(D.jsxs)("div",{"data-tag":"allowRowEvents",children:[Object(D.jsxs)(d.f,{color:"warning",className:"text-white mr-1",size:"sm",onClick:function(){return Object(v.a)(e.id_pegawai)},children:["PDF ",Object(D.jsx)(u.a,{content:h.a})]}),Object(D.jsxs)(d.f,{color:"success",className:"text-white",size:"sm",onClick:function(){return Object(C.a)("absensi-per-tahun/"+e.id_pegawai)},children:["Excel ",Object(D.jsx)(u.a,{content:h.a})]})]})}}],Q=l.a.useMemo((function(){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(S,{onFilter:function(e){return n(e.target.value)},onClear:function(){a&&(x(!b),n(""))},filterText:a})})}),[a,b]),V=l.a.useCallback((function(e){K([e.selection]);var t=Date.parse(e.selection.startDate),a=Date.parse(e.selection.endDate),n=Object(p.a)(t,"Y-MM-dd"),c=Object(p.a)(a,"Y-MM-dd");G(Object(s.a)(Object(s.a)({},B),{},{startDate:n,endDate:c}))}),[B]);return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(d.h,{children:[Object(D.jsx)(d.l,{className:"d-flex justify-content-between my-card-header",children:Object(D.jsx)("div",{className:"title mb-2",children:Object(D.jsx)("h3",{children:"Rekap Absensi Pegawai"})})}),Object(D.jsxs)(d.i,{children:[Object(D.jsxs)(d.W,{children:[Object(D.jsx)(d.m,{md:"6",children:Object(D.jsxs)(d.h,{className:"shadow",children:[Object(D.jsx)(d.l,{className:"bg-dark",children:Object(D.jsx)("h5",{className:"mb-0",children:"Filter berdasarkan per Tahun"})}),Object(D.jsx)(d.n,{show:U,children:Object(D.jsx)(d.i,{children:Object(D.jsxs)(d.w,{children:[Object(D.jsxs)(d.x,{children:[Object(D.jsx)(d.K,{children:"Masukkan tahun"}),Object(D.jsxs)(d.X,{costum:!0,name:"filter_tahun",id:"filter_tahun",value:N,onChange:function(e){return function(e){R(e.target.value)}(e)},children:[Object(D.jsx)("option",{value:"",children:"--- Pilih Tahun ---"}),function(){for(var e=(new Date).getFullYear(),t=[],a=2015;a<=e;a++)t.push(a);return t}().map((function(e,t){return Object(D.jsx)("option",{value:e,children:e})}))]})]}),z&&Object(D.jsx)("div",{children:Object(D.jsx)(d.W,{children:Object(D.jsx)(d.m,{className:"text-center",children:Object(D.jsx)("img",{className:"mt-4 ml-3",width:30,src:w.c,alt:"load-animation"})})})})]})})}),Object(D.jsxs)(d.j,{className:"d-flex justify-content-between",children:[Object(D.jsx)(d.f,{type:"button",color:"secondary",onClick:function(){return A(!U)},children:U?"Tutup":"Klik untuk melihat"}),Object(D.jsxs)("div",{children:[Object(D.jsx)(d.U,{content:"Cetak Rekapan Absensi Pegawai Berdasarkan Tahun",children:Object(D.jsxs)(d.f,{type:"button",color:"info",className:"ml-2",onClick:function(){return Object(k.a)("semua",N)},children:[Object(D.jsx)("span",{className:"my-text-button",children:"Cetak Rekapan Absensi"})," ",Object(D.jsx)(u.a,{content:h.a})]})}),Object(D.jsx)(d.U,{content:"Export Rekapan Absensi Pegawai ke Excel",children:Object(D.jsxs)(d.f,{type:"button",color:"success",className:"ml-2",onClick:function(){return Object(C.a)("rekap-absensi-semua-pegawai/tahun",N,"filter_tahun")},children:[Object(D.jsx)("span",{className:"my-text-button",children:"Excel"})," ",Object(D.jsx)(u.a,{content:h.a})]})})]})]})]})}),Object(D.jsx)(d.m,{md:"6",children:Object(D.jsxs)(d.h,{className:"shadow",children:[Object(D.jsx)(d.l,{className:"bg-dark",children:Object(D.jsx)("h5",{className:"mb-0",children:"Filter berdasarkan tanggal"})}),Object(D.jsx)(d.n,{show:U,children:Object(D.jsxs)(d.i,{children:[Object(D.jsx)(_,{state:I,handleDateChange:V}),z&&Object(D.jsx)("div",{children:Object(D.jsx)(d.W,{children:Object(D.jsx)(d.m,{className:"text-center",children:Object(D.jsx)("img",{className:"mt-4 ml-3",width:30,src:w.c,alt:"load-animation"})})})})]})}),Object(D.jsxs)(d.j,{className:"d-flex justify-content-between",children:[Object(D.jsx)(d.f,{type:"button",color:"secondary",onClick:function(){return A(!U)},children:U?"Tutup":"Klik untuk melihat"}),Object(D.jsxs)("div",{children:[Object(D.jsx)(d.U,{content:"Cetak Rekapan Absensi Pegawai Berdasarkan Filter Tanggal",children:Object(D.jsxs)(d.f,{type:"button",color:"info",className:"ml-2",onClick:function(){return e="semua",t=B,void window.open("".concat(localStorage.baseURL,"print-rekap-absensi-tanggal/").concat(e,"?first_date=").concat(t.startDate,"&last_date=").concat(t.endDate),"_blank");var e,t},children:[Object(D.jsx)("span",{className:"my-text-button",children:"Cetak Rekapan Absensi"})," ",Object(D.jsx)(u.a,{content:h.a})]})}),Object(D.jsx)(d.U,{content:"Export Rekapan Absensi Pegawai ke Excel",children:Object(D.jsxs)(d.f,{type:"button",color:"success",className:"ml-2",onClick:function(){return Object(C.a)("rekap-absensi-semua-pegawai/tanggal",B,"filter_tanggal")},children:[Object(D.jsx)("span",{className:"my-text-button",children:"Excel"})," ",Object(D.jsx)(u.a,{content:h.a})]})})]})]})]})})]}),P.length>0?Object(D.jsx)(j.a,{columns:q,data:X,noHeader:!0,responsive:!0,customStyles:{headCells:{style:{fontSize:"1.15em"}}},pagination:!0,subHeader:!0,subHeaderComponent:Q,highlightOnHover:!0}):Object(D.jsx)("div",{children:Object(D.jsx)(d.W,{children:Object(D.jsx)(d.m,{className:"text-center",children:Object(D.jsx)("img",{className:"mt-4 ml-3",width:30,src:w.c,alt:"load-animation"})})})})]})]})})}},638:function(e,t,a){"use strict";function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}a.d(t,"a",(function(){return n}))},640:function(e,t,a){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(a){if("filter_tanggal"===a){var n="first_date=".concat(t.startDate,"&last_date=").concat(t.endDate);window.open("".concat(localStorage.baseURL).concat(e,"/export/?").concat(n),"_self")}else if("filter_tahun"===a){var c="tahun=".concat(t);window.open("".concat(localStorage.baseURL).concat(e,"/export/?").concat(c),"_self")}else if("filter_bulan_tahun"===a){var s="bulan=".concat(t.bulan,"&tahun=").concat(t.tahun);window.open("".concat(localStorage.baseURL).concat(e,"/export?").concat(s),"_self")}}else window.open("".concat(localStorage.baseURL).concat(e,"/export"),"_self")}},677:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.open("".concat(localStorage.baseURL,"print-rekap-absensi/").concat(e,"?tahun=").concat(t),"_blank")}},734:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){window.open("".concat(localStorage.baseURL,"print-rekap-absensi-pegawai/").concat(e),"_blank")}}}]);
//# sourceMappingURL=41.ba73e2d8.chunk.js.map