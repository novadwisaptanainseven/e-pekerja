(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[73],{1006:function(e,t,a){"use strict";a.r(t);var n=a(638),c=a(2),i=a(9),r=a(1),s=a(628),o=a(637),l=a(971),d=a(163),j=a(40),b=a(626),u=function(e){e({type:j.LOADING}),b.a.get("admin/struktur").then((function(t){e({type:j.SUCCESS,payload:t.data.data}),console.log(t.data)})).catch((function(t){e({type:j.ERROR,payload:t.response.data.message}),console.log(t.response.data)}))},h=function(e,t,a,n,c,i){i(!0),b.a.post("admin/struktur/".concat(e),t,{header:{"Content-Type":"multipart/form-data; boundary=".concat(t._boundary)}}).then((function(e){console.log(e.data),u(a),n(),i(!1)})).catch((function(e){console.log(e.response.data),c(e.response.data.errors),i(!1)}))},O=function(e,t,a,n){a(!0),b.a.delete("admin/struktur/".concat(e)).then((function(e){u(t),console.log(e.data),n.fire({icon:"success",title:"Terhapus",text:"Gambar berhasil dihapus"}),a(!1)})).catch((function(e){console.log(e.response.data),n.fire({icon:"error",title:"Gagal",text:"Gambar gagal dihapus. Terjadi kesalahan"}),a(!1)}))},p=a(703),g=a(631),x=a.n(g),f=a(632),m=a.n(f),k=a(643),w=a(587),y=a(17),v=m()(x.a);t.default=function(){var e=Object(r.useContext)(d.a),t=e.dashboardState,a=e.dashboardDispatch,g=e.strukturState,x=e.strukturDispatch,f=t.data,m=t.loading,C=g.data,_=Object(r.useState)("1"),S=Object(i.a)(_,2),P=S[0],B=S[1],A=Object(r.useState)({id:"1",file:void 0,errorInput:""}),T=Object(i.a)(A,2),D=T[0],I=T[1],G=Object(r.useState)(!1),N=Object(i.a)(G,2),E=N[0],F=N[1];Object(r.useEffect)((function(){var e;(e=a)({type:j.DASHBOARD_LOADING}),b.a.get("admin/dashboard").then((function(t){e({type:j.DASHBOARD_SUCCESS,payload:t.data.data}),console.log(t.data)})).catch((function(t){e({type:j.DASHBOARD_ERROR,payload:t.response.data.message}),console.log(t.response.data)}))}),[a]),Object(r.useEffect)((function(){u(x)}),[x]),Object(r.useEffect)((function(){console.log(D)}),[D]);var R=function(){v.fire({icon:"success",title:"Upload Berhasil",showConfirmButton:!1,timer:1500}).then((function(e){}))},U=function(e){var t="";for(var a in e)t+="".concat(e[a],", ");v.fire({icon:"error",title:"Upload Gagal",text:t}).then((function(e){}))},L=function(){return Object(y.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)(s.y,{className:"d-flex mb-0",style:{width:"350px"},children:[Object(y.jsx)(s.E,{className:D.errorInput?"is-invalid":null,type:"file",name:"file",onChange:function(e){var t;(t=e.target.files[0])?["image/jpg","image/jpeg","image/png"].includes(t.type)?t.size>1048e3?I(Object(c.a)(Object(c.a)({},D),{},{file:t,errorInput:"Gambar tidak boleh lebih dari 1 mb!"})):I(Object(c.a)(Object(c.a)({},D),{},{file:t,errorInput:""})):I(Object(c.a)(Object(c.a)({},D),{},{file:t,errorInput:"Gambar hanya boleh bertipe jpg, jpeg, atau png!"})):I(Object(c.a)(Object(c.a)({},D),{},{file:t,errorInput:"Gambar belum ada!"}))}}),Object(y.jsx)(s.f,{className:"ml-1",color:"secondary",disabled:!(D.file&&!D.errorInput&&!E),onClick:function(){return function(){console.log(D);var e=new FormData;e.append("gambar",D.file);var t,a=Object(n.a)(e.entries());try{for(a.s();!(t=a.n()).done;){var c=t.value;console.log(c)}}catch(i){a.e(i)}finally{a.f()}h(D.id,e,x,R,U,F)}()},children:E?"Loading...":"Upload"})]}),Object(y.jsxs)(s.z,{children:[Object(y.jsx)("b",{children:"Input File: "}),D.file&&D.file.name]}),D.errorInput&&Object(y.jsx)("div",{className:"text-danger",children:D.errorInput})]}),Object(y.jsx)(s.f,{color:"danger",style:{height:"40px"},onClick:function(){v.fire({icon:"warning",title:"Anda yakin ingin menghapus gambar struktur ini ?",text:"Jika yakin, klik YA",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"YA"}).then((function(e){e.isConfirmed&&O(D.id,x,F,v)}))},children:Object(y.jsx)(o.a,{content:w.a})})]})};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(s.X,{children:[Object(y.jsx)(s.n,{xs:"12",sm:"6",lg:"3",children:Object(y.jsx)(s.nb,{text:"Total Pegawai",header:f?"".concat(f.total_pegawai):"...",color:"info",iconPadding:!1,children:Object(y.jsx)(o.a,{width:24,name:"cil-user"})})}),Object(y.jsx)(s.n,{xs:"12",sm:"6",lg:"3",children:Object(y.jsx)(s.nb,{text:"Pegawai Cuti",header:f?"".concat(f.total_cuti):"...",color:"primary",iconPadding:!1,children:Object(y.jsx)(o.a,{width:24,name:"cil-user"})})}),Object(y.jsx)(s.n,{xs:"12",sm:"6",lg:"3",children:Object(y.jsx)(s.nb,{text:"Pegawai Pensiun",header:f?"".concat(f.total_pensiun):"...",color:"warning",iconPadding:!1,children:Object(y.jsx)(o.a,{width:24,name:"cil-user"})})}),Object(y.jsx)(s.n,{xs:"12",sm:"6",lg:"3",children:Object(y.jsx)(s.nb,{text:"Pegawai Mutasi",header:f?"".concat(f.total_mutasi):"...",color:"success",iconPadding:!1,children:Object(y.jsx)(o.a,{width:24,name:"cil-user"})})})]}),f&&!m&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(s.X,{children:[Object(y.jsx)(s.n,{xs:"12",lg:"6",children:Object(y.jsxs)(s.h,{children:[Object(y.jsx)(s.l,{children:"Klasifikasi Data Pegawai"}),Object(y.jsx)(s.i,{children:Object(y.jsx)(l.b,{datasets:[{backgroundColor:["#41B883","#FFCE56","#00D8FF"],data:[f.total_pns,f.total_pttb,f.total_ptth]}],labels:["PNS","PTTB","PTTH"],options:{tooltips:{enabled:!0}}})})]})}),Object(y.jsx)(s.n,{xs:"12",lg:"6",children:Object(y.jsxs)(s.h,{children:[Object(y.jsx)(s.l,{children:"Gender Pegawai"}),Object(y.jsx)(s.i,{children:Object(y.jsx)(l.b,{datasets:[{backgroundColor:["#36A2EB","#FF6384"],data:[f.total_pria,f.total_wanita]}],labels:["Laki-Laki","Perempuan"],options:{tooltips:{enabled:!0}}})})]})})]}),Object(y.jsx)(s.X,{children:Object(y.jsx)(s.n,{children:Object(y.jsxs)(s.h,{children:[Object(y.jsx)(s.l,{children:"Total Pegawai Berdasarkan Bidang"}),Object(y.jsx)(s.i,{children:Object(y.jsx)(l.a,{datasets:[{label:"Total Pegawai",backgroundColor:"#f87979",data:[0,f.total_pegawai_bidang.sekretariat,f.total_pegawai_bidang.permukiman,f.total_pegawai_bidang.perumahan,f.total_pegawai_bidang.psu,0]}],labels:["","Sekretariat","Permukiman","Perumahan","PSU",""],options:{tooltips:{enabled:!0}}})})]})})}),Object(y.jsx)(s.X,{children:Object(y.jsx)(s.n,{children:Object(y.jsxs)(s.h,{children:[Object(y.jsx)(s.l,{children:"Struktur Organisasi"}),Object(y.jsx)(s.i,{children:Object(y.jsxs)(s.kb,{activeTab:P,onActiveTabChange:function(e){B(e),I(Object(c.a)(Object(c.a)({},D),{},{id:e,file:void 0,errorInput:""}))},children:[Object(y.jsx)(s.S,{variant:"pills",children:C&&C.map((function(e,t){return Object(y.jsx)(s.T,{children:Object(y.jsx)(s.U,{"data-tab":e.id,children:Object(p.a)(e.nama_struktur)})},t)}))}),Object(y.jsx)(s.ib,{children:C&&C.map((function(e,t){return Object(y.jsx)(s.jb,{"data-tab":e.id,children:Object(y.jsxs)("div",{className:"mt-3",children:[Object(y.jsx)(L,{}),e.gambar?Object(y.jsx)("div",{className:"mt-3",children:Object(y.jsx)("img",{style:{width:"100%"},src:Object(k.b)(e.gambar),alt:"struktur-organisasi-img"})}):Object(y.jsx)("div",{className:"text-center mt-3",children:"Belum ada Gambar. Silahkan upload terlebih dahulu"})]})},t)}))})]})})]})})})]})]})}},703:function(e,t,a){"use strict";t.a=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}}}]);
//# sourceMappingURL=73.05fe214e.chunk.js.map