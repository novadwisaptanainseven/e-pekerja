(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[68],{695:function(e,t,a){"use strict";t.a=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}},995:function(e,t,a){"use strict";a.r(t);var n=a(641),c=a(2),i=a(9),r=a(1),s=a(628),o=a(639),l=a(964),d=a(163),j=a(40),b=a(626),u=function(e){e({type:j.LOADING}),b.a.get("admin/struktur").then((function(t){e({type:j.SUCCESS,payload:t.data.data}),console.log(t.data)})).catch((function(t){e({type:j.ERROR,payload:t.response.data.message}),console.log(t.response.data)}))},h=function(e,t,a,n,c,i){i(!0),b.a.post("admin/struktur/".concat(e),t,{header:{"Content-Type":"multipart/form-data; boundary=".concat(t._boundary)}}).then((function(e){console.log(e.data),u(a),n(),i(!1)})).catch((function(e){console.log(e.response.data),c(e.response.data.errors),i(!1)}))},O=function(e,t,a,n){a(!0),b.a.delete("admin/struktur/".concat(e)).then((function(e){u(t),console.log(e.data),n.fire({icon:"success",title:"Terhapus",text:"Gambar berhasil dihapus"}),a(!1)})).catch((function(e){console.log(e.response.data),n.fire({icon:"error",title:"Gagal",text:"Gambar gagal dihapus. Terjadi kesalahan"}),a(!1)}))},p=a(695),m=a(632),g=a.n(m),x=a(633),f=a.n(x),k=a(645),w=a(587),y=a(17),v=f()(g.a);t.default=function(){var e=Object(r.useContext)(d.a),t=e.dashboardState,a=e.dashboardDispatch,m=e.strukturState,g=e.strukturDispatch,x=t.data,f=t.loading,C=m.data,_=Object(r.useState)("1"),S=Object(i.a)(_,2),P=S[0],B=S[1],A=Object(r.useState)({id:"1",file:void 0,errorInput:""}),D=Object(i.a)(A,2),T=D[0],I=D[1],G=Object(r.useState)(!1),N=Object(i.a)(G,2),F=N[0],R=N[1];Object(r.useEffect)((function(){var e;(e=a)({type:j.DASHBOARD_LOADING}),b.a.get("admin/dashboard").then((function(t){e({type:j.DASHBOARD_SUCCESS,payload:t.data.data}),console.log(t.data)})).catch((function(t){e({type:j.DASHBOARD_ERROR,payload:t.response.data.message}),console.log(t.response.data)}))}),[a]),Object(r.useEffect)((function(){u(g)}),[g]),Object(r.useEffect)((function(){console.log(T)}),[T]);var E=function(){v.fire({icon:"success",title:"Upload Berhasil",showConfirmButton:!1,timer:1500}).then((function(e){}))},U=function(e){var t="";for(var a in e)t+="".concat(e[a],", ");v.fire({icon:"error",title:"Upload Gagal",text:t}).then((function(e){}))},L=function(){return Object(y.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)(s.x,{className:"d-flex mb-0",style:{width:"350px"},children:[Object(y.jsx)(s.D,{className:T.errorInput?"is-invalid":null,type:"file",name:"file",onChange:function(e){var t;(t=e.target.files[0])?["image/jpg","image/jpeg","image/png"].includes(t.type)?t.size>1048e3?I(Object(c.a)(Object(c.a)({},T),{},{file:t,errorInput:"Gambar tidak boleh lebih dari 1 mb!"})):I(Object(c.a)(Object(c.a)({},T),{},{file:t,errorInput:""})):I(Object(c.a)(Object(c.a)({},T),{},{file:t,errorInput:"Gambar hanya boleh bertipe jpg, jpeg, atau png!"})):I(Object(c.a)(Object(c.a)({},T),{},{file:t,errorInput:"Gambar belum ada!"}))}}),Object(y.jsx)(s.f,{className:"ml-1",color:"secondary",disabled:!(T.file&&!T.errorInput&&!F),onClick:function(){return function(){console.log(T);var e=new FormData;e.append("gambar",T.file);var t,a=Object(n.a)(e.entries());try{for(a.s();!(t=a.n()).done;){var c=t.value;console.log(c)}}catch(i){a.e(i)}finally{a.f()}h(T.id,e,g,E,U,R)}()},children:F?"Loading...":"Upload"})]}),Object(y.jsxs)(s.y,{children:[Object(y.jsx)("b",{children:"Input File: "}),T.file&&T.file.name]}),T.errorInput&&Object(y.jsx)("div",{className:"text-danger",children:T.errorInput})]}),Object(y.jsx)(s.f,{color:"danger",style:{height:"40px"},onClick:function(){v.fire({icon:"warning",title:"Anda yakin ingin menghapus gambar struktur ini ?",text:"Jika yakin, klik YA",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"YA"}).then((function(e){e.isConfirmed&&O(T.id,g,R,v)}))},children:Object(y.jsx)(o.a,{content:w.a})})]})};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(s.W,{children:[Object(y.jsx)(s.m,{xs:"12",sm:"6",lg:"3",children:Object(y.jsx)(s.mb,{text:"Total Pegawai",header:x?"".concat(x.total_pegawai):"...",color:"info",iconPadding:!1,children:Object(y.jsx)(o.a,{width:24,name:"cil-user"})})}),Object(y.jsx)(s.m,{xs:"12",sm:"6",lg:"3",children:Object(y.jsx)(s.mb,{text:"Pegawai Cuti",header:x?"".concat(x.total_cuti):"...",color:"primary",iconPadding:!1,children:Object(y.jsx)(o.a,{width:24,name:"cil-user"})})}),Object(y.jsx)(s.m,{xs:"12",sm:"6",lg:"3",children:Object(y.jsx)(s.mb,{text:"Pegawai Pensiun",header:x?"".concat(x.total_pensiun):"...",color:"warning",iconPadding:!1,children:Object(y.jsx)(o.a,{width:24,name:"cil-user"})})}),Object(y.jsx)(s.m,{xs:"12",sm:"6",lg:"3",children:Object(y.jsx)(s.mb,{text:"Pegawai Mutasi",header:x?"".concat(x.total_mutasi):"...",color:"success",iconPadding:!1,children:Object(y.jsx)(o.a,{width:24,name:"cil-user"})})})]}),x&&!f&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(s.W,{children:[Object(y.jsx)(s.m,{xs:"12",lg:"6",children:Object(y.jsxs)(s.h,{children:[Object(y.jsx)(s.l,{children:"Klasifikasi Data Pegawai"}),Object(y.jsx)(s.i,{children:Object(y.jsx)(l.b,{datasets:[{backgroundColor:["#41B883","#FFCE56","#00D8FF"],data:[x.total_pns,x.total_pttb,x.total_ptth]}],labels:["PNS","PTTB","PTTH"],options:{tooltips:{enabled:!0}}})})]})}),Object(y.jsx)(s.m,{xs:"12",lg:"6",children:Object(y.jsxs)(s.h,{children:[Object(y.jsx)(s.l,{children:"Gender Pegawai"}),Object(y.jsx)(s.i,{children:Object(y.jsx)(l.b,{datasets:[{backgroundColor:["#36A2EB","#FF6384"],data:[x.total_pria,x.total_wanita]}],labels:["Laki-Laki","Perempuan"],options:{tooltips:{enabled:!0}}})})]})})]}),Object(y.jsx)(s.W,{children:Object(y.jsx)(s.m,{children:Object(y.jsxs)(s.h,{children:[Object(y.jsx)(s.l,{children:"Total Pegawai Berdasarkan Bidang"}),Object(y.jsx)(s.i,{children:Object(y.jsx)(l.a,{datasets:[{label:"Total Pegawai",backgroundColor:"#f87979",data:[0,x.total_pegawai_bidang.sekretariat,x.total_pegawai_bidang.permukiman,x.total_pegawai_bidang.perumahan,x.total_pegawai_bidang.psu,0]}],labels:["","Sekretariat","Permukiman","Perumahan","PSU",""],options:{tooltips:{enabled:!0}}})})]})})}),Object(y.jsx)(s.W,{children:Object(y.jsx)(s.m,{children:Object(y.jsxs)(s.h,{children:[Object(y.jsx)(s.l,{children:"Struktur Organisasi"}),Object(y.jsx)(s.i,{children:Object(y.jsxs)(s.jb,{activeTab:P,onActiveTabChange:function(e){B(e),I(Object(c.a)(Object(c.a)({},T),{},{id:e,file:void 0,errorInput:""}))},children:[Object(y.jsx)(s.R,{variant:"pills",children:C&&C.map((function(e,t){return Object(y.jsx)(s.S,{children:Object(y.jsx)(s.T,{"data-tab":e.id,children:Object(p.a)(e.nama_struktur)})},t)}))}),Object(y.jsx)(s.hb,{children:C&&C.map((function(e,t){return Object(y.jsx)(s.ib,{"data-tab":e.id,children:Object(y.jsxs)("div",{className:"mt-3",children:[Object(y.jsx)(L,{}),e.gambar?Object(y.jsx)("div",{className:"mt-3",children:Object(y.jsx)("img",{style:{width:"100%"},src:Object(k.b)(e.gambar),alt:"struktur-organisasi-img"})}):Object(y.jsx)("div",{className:"text-center mt-3",children:"Belum ada Gambar. Silahkan upload terlebih dahulu"})]})},t)}))})]})})]})})})]})]})}}}]);
//# sourceMappingURL=68.c08363f5.chunk.js.map