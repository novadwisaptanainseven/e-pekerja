(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[86],{1030:function(e,a,r){"use strict";r.r(a);var s=r(8),t=r(1),n=r(20),c=r(627),l=r(637),i=r(635),o=r(634),d=r(163),u=r(40),m=r(626),j=r(670),h=r(629),p=r(17);a.default=function(){var e=Object(n.g)(),a=Object(t.useContext)(d.a),r=a.loginState,b=a.loginDispatch,x=r.loading,O=r.data,g=r.error,f=Object(t.useState)(!0),w=Object(s.a)(f,2),N=w[0],y=w[1];Object(t.useEffect)((function(){return N&&function(e){localStorage.token&&e.push("/epekerja/admin/dashboard")}(e),O&&(1===O.level?window.location.href="/epekerja/admin/":window.location.href="/epekerja/user"),function(){b({type:u.LOGIN_CLEAN_UP})}}),[O,N,e,b]);var v=i.c().shape({username:i.e().required("Username harus diisi"),password:i.e().required("Password harus diisi")}),k=function(e){y(!1),function(e,a){a({type:u.LOGIN_LOADING}),m.a.post("login",e).then((function(e){localStorage.token=e.data.token,localStorage.level=e.data.user.level,localStorage.id_user=e.data.user.id,localStorage.loginTimestamp=(new Date).getTime()+72e5,a({type:u.LOGIN_SUCCESS,payload:e.data.user}),console.log(e.data)})).catch((function(e){a({type:u.LOGIN_ERROR,payload:e.response.data.message}),console.log(e.response.data)}))}(e,b)};return Object(p.jsx)("div",{style:{marginTop:"100px"},className:"c-app c-default-layout flex-row",children:Object(p.jsxs)(c.p,{children:[Object(p.jsx)(c.X,{className:"mb-3",children:Object(p.jsxs)(c.n,{className:"text-center",children:[Object(p.jsx)("img",{width:150,className:"mb-3",src:h.f,alt:"logo-kota-samarinda"}),Object(p.jsx)("h1",{style:{fontSize:"3.5em"},children:"E-Pekerja"}),Object(p.jsx)("h1",{className:"font-weight-normal",children:"Dinas Perumahan dan Kawasan Permukiman Samarinda"})]})}),Object(p.jsx)(c.X,{className:"justify-content-center",children:Object(p.jsx)(c.n,{md:"5",children:Object(p.jsx)(c.k,{children:Object(p.jsx)(c.h,{className:"p-4",children:Object(p.jsxs)(c.i,{children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsx)("p",{className:"text-muted",children:"Login ke akun Anda"}),g&&Object(p.jsxs)(c.a,{closeButton:!0,className:"alert-danger",fade:!0,children:[Object(p.jsx)("span",{className:"alert-inner--icon",children:Object(p.jsx)(l.a,{content:j.a,color:"white"})})," ",Object(p.jsxs)("span",{className:"alert-inner--text ml-2",children:[g," !"]})]}),Object(p.jsx)(o.a,{initialValues:{username:"",password:""},validationSchema:v,onSubmit:function(e){return k(e)},children:function(e){var a=e.values,r=e.errors,s=e.touched,t=e.handleSubmit,n=e.handleChange,i=e.handleBlur;return Object(p.jsxs)(c.x,{onSubmit:t,children:[Object(p.jsxs)(c.G,{className:"mb-1 ".concat(r.username&&s.username?"input-error":null),children:[Object(p.jsx)(c.I,{children:Object(p.jsx)(c.J,{children:Object(p.jsx)(l.a,{name:"cil-user",className:r.username&&s.username?"text-danger":null})})}),Object(p.jsx)(c.E,{type:"text",id:"username",name:"username",placeholder:"Username",autoComplete:"username",onChange:n,onBlur:i,value:a.username||""})]}),r.username&&s.username&&Object(p.jsx)("div",{className:"text-danger text-error",children:r.username}),Object(p.jsxs)(c.G,{className:"mt-3 mb-1 ".concat(r.password&&s.password?"input-error":null),children:[Object(p.jsx)(c.I,{children:Object(p.jsx)(c.J,{children:Object(p.jsx)(l.a,{name:"cil-lock-locked",className:r.password&&s.password?"text-danger":null})})}),Object(p.jsx)(c.E,{id:"password",name:"password",type:"password",placeholder:"Password",autoComplete:"current-password",onChange:n,onBlur:i,value:a.password||""})]}),r.password&&s.password&&Object(p.jsx)("div",{className:"text-danger text-error",children:r.password}),Object(p.jsx)(c.X,{children:Object(p.jsxs)(c.n,{xs:"6",children:[Object(p.jsx)(c.f,{color:"primary",className:"px-4 mt-4",type:"submit",disabled:!!x,children:"Login"}),x&&Object(p.jsx)("img",{className:"mt-4 ml-3",width:30,src:h.d,alt:"load-animation"})]})})]})}})]})})})})})]})})}},670:function(e,a,r){"use strict";r.d(a,"a",(function(){return s}));var s=["512 512","<rect width='34.924' height='34.924' x='256' y='95.998' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M16,496H496V16H16ZM48,48H464V464H48Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M285.313,359.032a18.123,18.123,0,0,1-15.6,8.966,18.061,18.061,0,0,1-17.327-23.157l35.67-121.277A49.577,49.577,0,0,0,194.7,190.572l-11.718,28.234,29.557,12.266,11.718-28.235a17.577,17.577,0,0,1,33.1,11.7l-35.67,121.277A50.061,50.061,0,0,0,269.709,400a50.227,50.227,0,0,0,43.25-24.853l15.1-25.913-27.646-16.115Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=86.06a185be.chunk.js.map