{"version":3,"sources":["context/actions/UserPage/BerkasKp/getBerkasKp.js","context/actions/UserPage/BerkasKp/insertBerkasKp.js","context/actions/UserPage/BerkasKp/deleteBerkasKp.js","views/pages/User/KenaikanPangkat/index.js","reusable/Loading.js","helpers/getFilename.js","reusable/LoadingSubmit.js","context/actions/DownloadFile/getFileBerkasKp.js"],"names":["getBerkasKp","idPegawai","dispatch","type","LOADING","axiosInstance","get","then","res","console","log","data","SUCCESS","payload","catch","err","response","ERROR","insertBerkasKp","values","setLoading","Swal","post","header","_boundary","fire","icon","title","text","errMessage","errors","deleteBerkasKp","idBerkasKp","withReactContent","swal2","KenaikanPangkat","useContext","GlobalContext","berkasKpState","berkasKpDispatch","userState","berkasKp","user","useState","loadingUpload","setLoadingUpload","error","input","setInput","useEffect","id_pegawai","color","closeButton","fade","className","style","width","marginBottom","name","multiple","onChange","e","target","files","length","handleChangeUploadFiles","onClick","formData","FormData","berkas","Array","from","forEach","item","index","append","disabled","LoadingSubmit","berkas_kp","kenaikan_pangkat","status_validasi","ket_status_validasi","map","href","getFileBerkasKp","file","rel","getFilename","id","id_berkas_kp","showConfirmButton","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","isConfirmed","content","cilTrash","Loading","src","LoadAnimationBlue","alt","value","arr","split","LoadAnimationWhite","arr_file","localStorage","baseURL"],"mappings":"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","file":"static/js/45.c6ba8c1e.chunk.js","sourcesContent":["import { ERROR, LOADING, SUCCESS } from \"src/context/actionTypes\";\r\nimport axiosInstance from \"src/helpers/axios\";\r\n\r\nconst getBerkasKp = (idPegawai, dispatch) => {\r\n  dispatch({\r\n    type: LOADING,\r\n  });\r\n\r\n  axiosInstance\r\n    .get(`user/pegawai/${idPegawai}/berkas-kp`)\r\n    .then((res) => {\r\n      console.log(res.data);\r\n      dispatch({\r\n        type: SUCCESS,\r\n        payload: res.data.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response.data);\r\n      dispatch({\r\n        type: ERROR,\r\n        payload: err.response.data,\r\n      });\r\n    });\r\n};\r\n\r\nexport default getBerkasKp;\r\n","import axiosInstance from \"src/helpers/axios\";\r\nimport getBerkasKp from \"./getBerkasKp\";\r\n\r\nconst insertBerkasKp = (idPegawai, values, dispatch, setLoading, Swal) => {\r\n  setLoading(true);\r\n  axiosInstance\r\n    .post(`user/pegawai/${idPegawai}/berkas-kp`, values, {\r\n      header: {\r\n        \"Content-Type\": `multipart/form-data; boundary=${values._boundary}`,\r\n      },\r\n    })\r\n    .then((res) => {\r\n      console.log(res.data);\r\n      getBerkasKp(idPegawai, dispatch);\r\n      setLoading(false);\r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \"Sukses\",\r\n        text: \"Upload Berkas Berhasil\",\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response.data);\r\n      setLoading(false);\r\n\r\n      let errMessage = err.response.data.errors;\r\n\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Upload Gagal\",\r\n        text: errMessage,\r\n      });\r\n    });\r\n};\r\n\r\nexport default insertBerkasKp;\r\n","import axiosInstance from \"src/helpers/axios\";\r\nimport getBerkasKp from \"./getBerkasKp\";\r\n\r\nconst deleteBerkasKp = (idPegawai, idBerkasKp, dispatch, Swal) => {\r\n  axiosInstance\r\n    .get(`user/pegawai/${idPegawai}/berkas-kp/${idBerkasKp}/delete`)\r\n    .then((res) => {\r\n      console.log(res.data);\r\n      getBerkasKp(idPegawai, dispatch);\r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \"Sukses\",\r\n        text: \"Berhasil Menghapus Berkas\",\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response.data);\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Gagal\",\r\n        text: \"Gagal Menghapus Berkas. Terjadi Kesalahan Server\",\r\n      });\r\n    });\r\n};\r\n\r\nexport default deleteBerkasKp;\r\n","import { cilTrash } from \"@coreui/icons\";\r\nimport CIcon from \"@coreui/icons-react\";\r\nimport {\r\n  CAlert,\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CForm,\r\n  CFormGroup,\r\n  CInput,\r\n  CButton,\r\n  CBadge,\r\n} from \"@coreui/react\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport getFileBerkasKp from \"src/context/actions/DownloadFile/getFileBerkasKp\";\r\nimport {\r\n  deleteBerkasKp,\r\n  getBerkasKp,\r\n  insertBerkasKp,\r\n} from \"src/context/actions/UserPage/BerkasKp\";\r\nimport { GlobalContext } from \"src/context/Provider\";\r\nimport getFilename from \"src/helpers/getFilename\";\r\nimport Loading from \"src/reusable/Loading\";\r\nimport LoadingSubmit from \"src/reusable/LoadingSubmit\";\r\nimport swal2 from \"sweetalert2\";\r\nimport withReactContent from \"sweetalert2-react-content\";\r\n\r\nconst Swal = withReactContent(swal2);\r\n\r\nconst KenaikanPangkat = () => {\r\n  const { berkasKpState, berkasKpDispatch, userState } =\r\n    useContext(GlobalContext);\r\n  const { data: berkasKp } = berkasKpState;\r\n  const { data: user } = userState;\r\n  const [loadingUpload, setLoadingUpload] = useState(false);\r\n  const [input, setInput] = useState({\r\n    error: \"\",\r\n  });\r\n\r\n  // useEffect(() => {\r\n  //   console.log(input);\r\n  // }, [input]);\r\n\r\n  // Get Berkas Kenaikan Pangkat\r\n  useEffect(() => {\r\n    if (user) {\r\n      getBerkasKp(user.id_pegawai, berkasKpDispatch);\r\n    }\r\n  }, [berkasKpDispatch, user]);\r\n\r\n  // Delete berkas\r\n  const handleDeleteBerkas = (id) => {\r\n    Swal.fire({\r\n      icon: \"error\",\r\n      title: \"Anda yakin ingin menghapus data ini ?\",\r\n      text: \"Jika yakin, klik YA\",\r\n      showConfirmButton: true,\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"YA\",\r\n    }).then((res) => {\r\n      if (res.isConfirmed) {\r\n        deleteBerkasKp(user.id_pegawai, id, berkasKpDispatch, Swal);\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleChangeUploadFiles = (e) => {\r\n    if (e.target.files.length === 0) {\r\n      setInput({\r\n        ...input,\r\n        error: \"Berkas belum dipilih\",\r\n      });\r\n    } else {\r\n      setInput({\r\n        ...input,\r\n        [e.target.name]: e.target.files,\r\n        error: \"\",\r\n      });\r\n      // setInput({ ...input, [e.target.name]: e.target.files });\r\n      // console.log(\"oke\");\r\n    }\r\n  };\r\n\r\n  const handleUploadFiles = () => {\r\n    const formData = new FormData();\r\n\r\n    // Validasi\r\n    if (!input.berkas) {\r\n      // Jika berkas belum dipilih\r\n      setInput({\r\n        ...input,\r\n        error: \"Berkas belum dipilih\",\r\n      });\r\n    } else if (input.berkas.length === 0) {\r\n      // Jika berkas belum dipilih\r\n      setInput({\r\n        ...input,\r\n        error: \"Berkas belum dipilih\",\r\n      });\r\n    } else {\r\n      // Jika berkas sudah ada\r\n      setInput({\r\n        ...input,\r\n        error: \"\",\r\n      });\r\n\r\n      // Proses upload file via API\r\n      Array.from(input.berkas).forEach((item, index) => {\r\n        formData.append(`berkas_kp[${index}]`, item);\r\n      });\r\n\r\n      insertBerkasKp(\r\n        user.id_pegawai,\r\n        formData,\r\n        berkasKpDispatch,\r\n        setLoadingUpload,\r\n        Swal\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <CCard>\r\n        <CCardHeader>\r\n          <h3>Kenaikan Pangkat</h3>\r\n        </CCardHeader>\r\n        <CCardBody>\r\n          {!berkasKp ? (\r\n            <Loading />\r\n          ) : (\r\n            <>\r\n              <CAlert color=\"info\" closeButton fade>\r\n                Silahkan upload berkas sesuai dengan persyaratan dan jenis\r\n                kenaikan pangkat (Reguler, Jabatan Struktural, Jabatan\r\n                Fungsional)\r\n              </CAlert>\r\n              <CForm className=\"mb-4\">\r\n                <CFormGroup\r\n                  className=\"d-flex\"\r\n                  style={{ width: \"400px\", marginBottom: 0 }}\r\n                >\r\n                  <CInput\r\n                    type=\"file\"\r\n                    name=\"berkas\"\r\n                    multiple\r\n                    onChange={(e) => handleChangeUploadFiles(e)}\r\n                    className={input.error ? \"is-invalid\" : null}\r\n                  />\r\n                  <CButton\r\n                    color=\"primary\"\r\n                    className=\"ml-2\"\r\n                    onClick={handleUploadFiles}\r\n                    disabled={loadingUpload ? true : false}\r\n                  >\r\n                    {loadingUpload ? <LoadingSubmit /> : \"Upload\"}\r\n                  </CButton>\r\n                </CFormGroup>\r\n                {input.error && (\r\n                  <div className=\"text-danger\">{input.error}</div>\r\n                )}\r\n              </CForm>\r\n\r\n              {/* Jika sudah berkas yang diupload maka tampilkan indikator status validasi */}\r\n              {berkasKp.berkas_kp.length > 0 && (\r\n                <>\r\n                  {/* Status Belum Tervalidasi */}\r\n                  {berkasKp.kenaikan_pangkat.status_validasi === 0 && (\r\n                    <table className=\"table table-bordered\">\r\n                      <tbody>\r\n                        <tr>\r\n                          <th>Status</th>\r\n                          <td>\r\n                            <CBadge color=\"danger\">\r\n                              Menunggu persetujuan admin\r\n                            </CBadge>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  )}\r\n\r\n                  {/* Status Sudah Tervalidasi */}\r\n                  {berkasKp.kenaikan_pangkat.status_validasi === 1 && (\r\n                    <table className=\"table table-bordered\">\r\n                      <tbody>\r\n                        <tr>\r\n                          <th>Status</th>\r\n                          <td>\r\n                            <CBadge color=\"success\">\r\n                              Berkas Anda telah disetujui\r\n                            </CBadge>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  )}\r\n\r\n                  {/* Status Tidak Disetujui */}\r\n                  {berkasKp.kenaikan_pangkat.status_validasi === 2 && (\r\n                    <table className=\"table table-bordered\">\r\n                      <tbody>\r\n                        <tr>\r\n                          <th>Status</th>\r\n                          <td>\r\n                            <CBadge color=\"danger\">\r\n                              Berkas Anda belum disetujui\r\n                            </CBadge>\r\n                          </td>\r\n                        </tr>\r\n                        <tr>\r\n                          <th>Keterangan</th>\r\n                          <td>\r\n                            {berkasKp.kenaikan_pangkat.ket_status_validasi}\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  )}\r\n                </>\r\n              )}\r\n\r\n              {/* Tabel upload file */}\r\n              <table className=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>No</th>\r\n                    <th>Berkas</th>\r\n                    <th>Aksi</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {berkasKp.berkas_kp.map((item, index) => (\r\n                    <>\r\n                      <tr key={index}>\r\n                        <td width={80}>{index + 1}</td>\r\n                        <td>\r\n                          <a\r\n                            href={getFileBerkasKp(item.file)}\r\n                            target=\"_blank\"\r\n                            rel=\"noreferrer\"\r\n                          >\r\n                            {getFilename(item.file)}\r\n                          </a>\r\n                        </td>\r\n                        <td>\r\n                          <CButton\r\n                            color=\"danger\"\r\n                            onClick={() =>\r\n                              handleDeleteBerkas(item.id_berkas_kp)\r\n                            }\r\n                          >\r\n                            <CIcon content={cilTrash} />\r\n                          </CButton>\r\n                        </td>\r\n                      </tr>\r\n                    </>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </>\r\n          )}\r\n        </CCardBody>\r\n      </CCard>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default KenaikanPangkat;\r\n","import { CCol, CRow } from \"@coreui/react\";\r\nimport React from \"react\";\r\nimport { LoadAnimationBlue } from \"src/assets\";\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <CRow className=\"mb-3\">\r\n      <CCol className=\"text-center\">\r\n        <img\r\n          className=\"mt-4 ml-3\"\r\n          width={30}\r\n          src={LoadAnimationBlue}\r\n          alt=\"load-animation\"\r\n        />\r\n      </CCol>\r\n    </CRow>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","const getFilename = (value) => {\r\n  const arr = value.split(\"/\");\r\n  const arr_name = arr[arr.length - 1];\r\n\r\n  return arr_name;\r\n};\r\n\r\nexport default getFilename;\r\n","import React from \"react\";\r\nimport { LoadAnimationWhite } from \"src/assets\";\r\n\r\nconst LoadingSubmit = () => {\r\n  return <img width={21} src={LoadAnimationWhite} alt=\"load-animation\" />;\r\n};\r\n\r\nexport default LoadingSubmit;\r\n","const getFileBerkasKp = (file) => {\r\n  let arr_file = file.split(\"/\");\r\n  let name = arr_file[arr_file.length - 1];\r\n\r\n  return `${localStorage.baseURL}berkas-kp/${name}`;\r\n};\r\n\r\nexport default getFileBerkasKp;\r\n"],"sourceRoot":""}