(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[48],{1019:function(e,t,a){"use strict";a.r(t);var n,c,s=a(2),r=a(9),i=a(640),o=a(1),l=a.n(o),d=a(628),j=a(641),b=a.n(j),u=a(637),h=a(571),x=(a(794),a(795),a(796)),p=a(748),O=a(642),m=a(163),f=a(40),g=a(626),k=a(629),w=a(688),v=a(743),y=a(645),C=a(17),D=O.default.input(n||(n=Object(i.a)(["\n  height: 37px;\n  width: 200px;\n  border-radius: 3px;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border: 1px solid #e5e5e5;\n  padding: 0 32px 0 16px;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]))),N=O.default.button(c||(c=Object(i.a)(["\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  height: 37px;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #3e5973;\n  border: none;\n  color: white;\n  padding: 0 10px;\n  transition: 0.3s;\n\n  &:hover {\n    background-color: #283c4f;\n  }\n"]))),S=function(e){var t=e.filterText,a=e.onFilter,n=e.onClear;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(D,{id:"search",type:"text",placeholder:"Cari pegawai","aria-label":"Search Input",value:t,onChange:a}),Object(C.jsx)(N,{type:"button",onClick:n,children:"Reset"})]})},R=function(e){var t=e.handleDateChange,a=e.state;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(x.DateRange,{editableDateInputs:!0,onChange:function(e){return t(e)},moveRangeOnFirstSelection:!1,ranges:a})})},E=l.a.memo(R);t.default=function(){var e=Object(o.useState)(""),t=Object(r.a)(e,2),a=t[0],n=t[1],c=Object(o.useState)(!1),i=Object(r.a)(c,2),j=i[0],x=i[1],O=Object(o.useState)((new Date).getFullYear()),D=Object(r.a)(O,2),N=D[0],R=D[1],_=Object(o.useState)(!1),F=Object(r.a)(_,2),A=F[0],T=F[1],L=Object(o.useContext)(m.a),P=L.rekapAbsensiState,z=L.rekapAbsensiDispatch,M=P.data,W=P.loading,H=Object(o.useState)([{startDate:new Date,endDate:new Date,key:"selection"}]),I=Object(r.a)(H,2),U=I[0],Y=I[1],V=Object(o.useState)({startDate:"",endDate:""}),X=Object(r.a)(V,2),J=X[0],K=X[1];Object(o.useEffect)((function(){var e,t;N&&(t=N,(e=z)({type:f.LOADING}),g.a.get("admin/pegawai/rekap-absensi?tahun=".concat(t)).then((function(t){e({type:f.SUCCESS,payload:t.data.data}),console.log(t.data)})).catch((function(t){e({type:f.ERROR}),console.log(t.response.data)})),K({startDate:"",endDate:""}))}),[z,N]),Object(o.useEffect)((function(){var e,t;J.startDate&&J.endDate&&(t=J,(e=z)({type:f.LOADING}),g.a.get("admin/pegawai/rekap-absensi-tanggal?first_date=".concat(t.startDate,"&last_date=").concat(t.endDate)).then((function(t){e({type:f.SUCCESS,payload:t.data.data}),console.log(t.data)})).catch((function(t){e({type:f.ERROR}),console.log(t.response.data)})),R(""))}),[J,z]);var B=M.filter((function(e){return!(!e.nama||!e.nama.toLowerCase().includes(a.toLowerCase()))})),G=[{name:"Nama",selector:"nama",sortable:!0,wrap:!0},{name:"Jabatan",selector:"jabatan",sortable:!0,wrap:!0},{name:"Hadir",selector:"hadir",sortable:!0,wrap:!0,maxWidth:"80px"},{name:"Izin",selector:"izin",sortable:!0,wrap:!0,maxWidth:"80px"},{name:"Sakit",selector:"sakit",sortable:!0,wrap:!0,maxWidth:"80px"},{name:"Cuti",selector:"cuti",sortable:!0,wrap:!0,maxWidth:"80px"},{name:"Tanpa Keterangan",selector:"tanpa_keterangan",sortable:!0,wrap:!0,maxWidth:"200px"},{maxWidth:"180px",name:"Action",sortable:!0,cell:function(e){return Object(C.jsxs)("div",{"data-tag":"allowRowEvents",children:[Object(C.jsxs)(d.f,{color:"warning",className:"text-white mr-1",size:"sm",onClick:function(){return Object(v.a)(e.id_pegawai)},children:["PDF ",Object(C.jsx)(u.a,{content:h.a})]}),Object(C.jsxs)(d.f,{color:"success",className:"text-white",size:"sm",onClick:function(){return Object(y.a)("absensi-per-tahun/"+e.id_pegawai)},children:["Excel ",Object(C.jsx)(u.a,{content:h.a})]})]})}}],q=l.a.useMemo((function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S,{onFilter:function(e){return n(e.target.value)},onClear:function(){a&&(x(!j),n(""))},filterText:a})})}),[a,j]),Q=l.a.useCallback((function(e){Y([e.selection]);var t=Date.parse(e.selection.startDate),a=Date.parse(e.selection.endDate),n=Object(p.a)(t,"Y-MM-dd"),c=Object(p.a)(a,"Y-MM-dd");K(Object(s.a)(Object(s.a)({},J),{},{startDate:n,endDate:c}))}),[J]);return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(d.h,{children:[Object(C.jsx)(d.l,{className:"d-flex justify-content-between my-card-header",children:Object(C.jsx)("div",{className:"title mb-2",children:Object(C.jsx)("h3",{children:"Rekap Absensi Pegawai"})})}),Object(C.jsxs)(d.i,{children:[Object(C.jsxs)(d.X,{children:[Object(C.jsx)(d.n,{md:"6",children:Object(C.jsxs)(d.h,{className:"shadow",children:[Object(C.jsx)(d.l,{className:"bg-dark",children:Object(C.jsx)("h5",{className:"mb-0",children:"Filter berdasarkan per Tahun"})}),Object(C.jsx)(d.o,{show:A,children:Object(C.jsx)(d.i,{children:Object(C.jsxs)(d.x,{children:[Object(C.jsxs)(d.y,{children:[Object(C.jsx)(d.L,{children:"Masukkan tahun"}),Object(C.jsxs)(d.Y,{costum:!0,name:"filter_tahun",id:"filter_tahun",value:N,onChange:function(e){return function(e){R(e.target.value)}(e)},children:[Object(C.jsx)("option",{value:"",children:"--- Pilih Tahun ---"}),function(){for(var e=(new Date).getFullYear(),t=[],a=2015;a<=e;a++)t.push(a);return t}().map((function(e,t){return Object(C.jsx)("option",{value:e,children:e})}))]})]}),W&&Object(C.jsx)("div",{children:Object(C.jsx)(d.X,{children:Object(C.jsx)(d.n,{className:"text-center",children:Object(C.jsx)("img",{className:"mt-4 ml-3",width:30,src:k.c,alt:"load-animation"})})})})]})})}),Object(C.jsxs)(d.j,{className:"d-flex justify-content-between",children:[Object(C.jsx)(d.f,{type:"button",color:"secondary",onClick:function(){return T(!A)},children:A?"Tutup":"Klik untuk melihat"}),Object(C.jsxs)("div",{children:[Object(C.jsx)(d.V,{content:"Cetak Rekapan Absensi Pegawai Berdasarkan Tahun",children:Object(C.jsxs)(d.f,{type:"button",color:"info",className:"ml-2",onClick:function(){return Object(w.a)("semua",N)},children:[Object(C.jsx)("span",{className:"my-text-button",children:"Cetak Rekapan Absensi"})," ",Object(C.jsx)(u.a,{content:h.a})]})}),Object(C.jsx)(d.V,{content:"Export Rekapan Absensi Pegawai ke Excel",children:Object(C.jsxs)(d.f,{type:"button",color:"success",className:"ml-2",onClick:function(){return Object(y.a)("rekap-absensi-semua-pegawai/tahun",N,"filter_tahun")},children:[Object(C.jsx)("span",{className:"my-text-button",children:"Excel"})," ",Object(C.jsx)(u.a,{content:h.a})]})})]})]})]})}),Object(C.jsx)(d.n,{md:"6",children:Object(C.jsxs)(d.h,{className:"shadow",children:[Object(C.jsx)(d.l,{className:"bg-dark",children:Object(C.jsx)("h5",{className:"mb-0",children:"Filter berdasarkan tanggal"})}),Object(C.jsx)(d.o,{show:A,children:Object(C.jsxs)(d.i,{children:[Object(C.jsx)(E,{state:U,handleDateChange:Q}),W&&Object(C.jsx)("div",{children:Object(C.jsx)(d.X,{children:Object(C.jsx)(d.n,{className:"text-center",children:Object(C.jsx)("img",{className:"mt-4 ml-3",width:30,src:k.c,alt:"load-animation"})})})})]})}),Object(C.jsxs)(d.j,{className:"d-flex justify-content-between",children:[Object(C.jsx)(d.f,{type:"button",color:"secondary",onClick:function(){return T(!A)},children:A?"Tutup":"Klik untuk melihat"}),Object(C.jsxs)("div",{children:[Object(C.jsx)(d.V,{content:"Cetak Rekapan Absensi Pegawai Berdasarkan Filter Tanggal",children:Object(C.jsxs)(d.f,{type:"button",color:"info",className:"ml-2",onClick:function(){return e="semua",t=J,void window.open("".concat(localStorage.baseURL,"print-rekap-absensi-tanggal/").concat(e,"?first_date=").concat(t.startDate,"&last_date=").concat(t.endDate),"_blank");var e,t},children:[Object(C.jsx)("span",{className:"my-text-button",children:"Cetak Rekapan Absensi"})," ",Object(C.jsx)(u.a,{content:h.a})]})}),Object(C.jsx)(d.V,{content:"Export Rekapan Absensi Pegawai ke Excel",children:Object(C.jsxs)(d.f,{type:"button",color:"success",className:"ml-2",onClick:function(){return Object(y.a)("rekap-absensi-semua-pegawai/tanggal",J,"filter_tanggal")},children:[Object(C.jsx)("span",{className:"my-text-button",children:"Excel"})," ",Object(C.jsx)(u.a,{content:h.a})]})})]})]})]})})]}),M.length>0?Object(C.jsx)(b.a,{columns:G,data:B,noHeader:!0,responsive:!0,customStyles:{headCells:{style:{fontSize:"1.15em"}}},pagination:!0,subHeader:!0,subHeaderComponent:q,highlightOnHover:!0}):Object(C.jsx)("div",{children:Object(C.jsx)(d.X,{children:Object(C.jsx)(d.n,{className:"text-center",children:Object(C.jsx)("img",{className:"mt-4 ml-3",width:30,src:k.c,alt:"load-animation"})})})})]})]})})}},640:function(e,t,a){"use strict";function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}a.d(t,"a",(function(){return n}))},688:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.open("".concat(localStorage.baseURL,"print-rekap-absensi/").concat(e,"?tahun=").concat(t),"_blank")}},743:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){window.open("".concat(localStorage.baseURL,"print-rekap-absensi-pegawai/").concat(e),"_blank")}}}]);
//# sourceMappingURL=48.c1f68e00.chunk.js.map