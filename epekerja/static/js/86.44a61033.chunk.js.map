{"version":3,"sources":["views/pages/Admin/Cuti/EditCuti.js","context/actions/Cuti/getCutiById.js","context/actions/Cuti/editCuti.js"],"names":["MySwal","withReactContent","swal2","EditCuti","modalEdit","setModalEdit","id_pegawai","history","useHistory","useState","loading","setLoading","data","setData","useEffect","id","id_cuti","setCuti","axiosInstance","get","then","res","console","log","catch","err","response","getCutiById","initState","tgl_mulai","tgl_selesai","jenis_cuti","keterangan","showAlertSuccess","fire","icon","title","showConfirmButton","timer","modal","push","showAlertError","message","err_message","key","text","result","validationSchema","Yup","shape","required","handleFormSubmit","values","put","errors","editCuti","initialValues","enableReinitialize","onSubmit","touched","handleChange","handleBlur","handleSubmit","row","md","name","value","onChange","onBlur","className","type","placeholder","min","disabled","color","width","src","LoadAnimationWhite","alt","onClick"],"mappings":"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","file":"static/js/86.44a61033.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  CFormGroup,\r\n  CInput,\r\n  CLabel,\r\n  CCol,\r\n  CSelect,\r\n  CForm,\r\n  CModalBody,\r\n  CModalFooter,\r\n  CButton,\r\n  CFormText,\r\n} from \"@coreui/react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { getCutiById } from \"src/context/actions/Cuti/getCutiById\";\r\nimport swal2 from \"sweetalert2\";\r\nimport withReactContent from \"sweetalert2-react-content\";\r\nimport * as Yup from \"yup\";\r\nimport { Formik } from \"formik\";\r\nimport { LoadAnimationWhite } from \"src/assets\";\r\nimport { editCuti } from \"src/context/actions/Cuti/editCuti\";\r\n\r\nconst MySwal = withReactContent(swal2);\r\n\r\nconst EditCuti = ({ modalEdit, setModalEdit, id_pegawai }) => {\r\n  const history = useHistory();\r\n  const [loading, setLoading] = useState(false);\r\n  const [data, setData] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    // Get Cuti by ID\r\n    if (modalEdit.id) {\r\n      getCutiById(id_pegawai, modalEdit.id, setData);\r\n    }\r\n\r\n    return () => {\r\n      setData(null);\r\n    };\r\n  }, [modalEdit, id_pegawai]);\r\n\r\n  // Inisialisasi State Formik\r\n  const initState = {\r\n    tgl_mulai: data ? data.tgl_mulai : \"\",\r\n    tgl_selesai: data ? data.tgl_selesai : \"\",\r\n    jenis_cuti: data ? data.jenis_cuti : \"\",\r\n    keterangan: data ? data.keterangan : \"\",\r\n  };\r\n\r\n  // Fungsi untuk menampilkan alert success edit data\r\n  const showAlertSuccess = () => {\r\n    MySwal.fire({\r\n      icon: \"success\",\r\n      title: \"Edit Cuti Berhasil\",\r\n      showConfirmButton: false,\r\n      timer: 1500,\r\n    }).then((res) => {\r\n      setModalEdit({\r\n        ...modalEdit,\r\n        modal: !modalEdit.modal,\r\n        id: null,\r\n      });\r\n      history.push(`/epekerja/admin/cuti/riwayat/${id_pegawai}`);\r\n    });\r\n  };\r\n\r\n  // Fungsi untuk menampilkan alert error edit data\r\n  const showAlertError = (message) => {\r\n    let err_message = \"\";\r\n\r\n    for (const key in message) {\r\n      err_message += `${message[key]}, `;\r\n    }\r\n\r\n    MySwal.fire({\r\n      icon: \"error\",\r\n      title: \"Edit Cuti Gagal\",\r\n      text: err_message,\r\n    }).then((result) => {\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  // Setting validasi form menggunakan YUP & FORMIK\r\n  const validationSchema = Yup.object().shape({\r\n    tgl_mulai: Yup.string().required(\"Tanggal mulai cuti harus diisi!\"),\r\n    tgl_selesai: Yup.string().required(\"Tanggal selesai cuti harus diisi!\"),\r\n    jenis_cuti: Yup.string().required(\"Jenis cuti harus dipilih!\"),\r\n    keterangan: Yup.string().required(\"Keterangan/alasan cuti harus diisi!\"),\r\n  });\r\n\r\n  // Menangani value dari form submit\r\n  const handleFormSubmit = (values) => {\r\n    editCuti(\r\n      id_pegawai,\r\n      modalEdit.id,\r\n      values,\r\n      setLoading,\r\n      showAlertSuccess,\r\n      showAlertError\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        initialValues={initState}\r\n        validationSchema={validationSchema}\r\n        enableReinitialize={true}\r\n        onSubmit={(values) => handleFormSubmit(values)}\r\n      >\r\n        {({\r\n          values,\r\n          errors,\r\n          touched,\r\n          handleChange,\r\n          handleBlur,\r\n          handleSubmit,\r\n        }) => (\r\n          <CForm onSubmit={handleSubmit}>\r\n            <CModalBody>\r\n              <CFormGroup row>\r\n                <CCol md=\"3\">\r\n                  <CLabel>Jenis Cuti</CLabel>\r\n                </CCol>\r\n                <CCol>\r\n                  <CSelect\r\n                    name=\"jenis_cuti\"\r\n                    value={values.jenis_cuti || \"\"}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    className={\r\n                      errors.jenis_cuti && touched.jenis_cuti\r\n                        ? \"is-invalid\"\r\n                        : null\r\n                    }\r\n                  >\r\n                    <option value=\"\">-- Jenis Cuti --</option>\r\n                    <option value=\"Cuti Tahunan\">Cuti Tahunan</option>\r\n                    <option value=\"Cuti Bulanan\">Cuti Bulanan</option>\r\n                    <option value=\"Cuti Harian\">Cuti Harian</option>\r\n                  </CSelect>\r\n                  {errors.jenis_cuti && touched.jenis_cuti && (\r\n                    <div className=\"invalid-feedback\">{errors.jenis_cuti}</div>\r\n                  )}\r\n                </CCol>\r\n              </CFormGroup>\r\n\r\n              <CFormGroup row>\r\n                <CCol md=\"3\">\r\n                  <CLabel>Tgl. Mulai</CLabel>\r\n                </CCol>\r\n                <CCol>\r\n                  <CInput\r\n                    type=\"date\"\r\n                    name=\"tgl_mulai\"\r\n                    id=\"tgl_mulai\"\r\n                    placeholder=\"Masukkan tgl mulai cuti\"\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    value={values.tgl_mulai}\r\n                    className={\r\n                      errors.tgl_mulai && touched.tgl_mulai\r\n                        ? \"is-invalid\"\r\n                        : null\r\n                    }\r\n                  />\r\n                  {errors.tgl_mulai && touched.tgl_mulai && (\r\n                    <div className=\"invalid-feedback\">{errors.tgl_mulai}</div>\r\n                  )}\r\n                </CCol>\r\n              </CFormGroup>\r\n\r\n              <CFormGroup row>\r\n                <CCol md=\"3\">\r\n                  <CLabel>Tgl. Selesai</CLabel>\r\n                </CCol>\r\n                <CCol>\r\n                  <CInput\r\n                    type=\"date\"\r\n                    name=\"tgl_selesai\"\r\n                    id=\"tgl_selesai\"\r\n                    placeholder=\"Masukkan tgl selesai cuti\"\r\n                    min={values.tgl_mulai}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    value={values.tgl_selesai}\r\n                    className={\r\n                      errors.tgl_selesai && touched.tgl_selesai\r\n                        ? \"is-invalid\"\r\n                        : null\r\n                    }\r\n                  />\r\n                  <CFormText>\r\n                    <b>Format: </b> Bulan / Tanggal / Tahun\r\n                  </CFormText>\r\n                  {errors.tgl_selesai && touched.tgl_selesai && (\r\n                    <div className=\"invalid-feedback\">{errors.tgl_selesai}</div>\r\n                  )}\r\n                </CCol>\r\n              </CFormGroup>\r\n              <CFormGroup row>\r\n                <CCol md=\"3\">\r\n                  <CLabel>Keterangan</CLabel>\r\n                </CCol>\r\n                <CCol>\r\n                  <CInput\r\n                    type=\"text\"\r\n                    name=\"keterangan\"\r\n                    id=\"keterangan\"\r\n                    placeholder=\"Masukkan keterangan / alasan cuti\"\r\n                    onBlur={handleBlur}\r\n                    value={values.keterangan}\r\n                    disabled={!values.tgl_mulai ? true : false}\r\n                    onChange={handleChange}\r\n                    className={\r\n                      errors.keterangan && touched.keterangan\r\n                        ? \"is-invalid\"\r\n                        : null\r\n                    }\r\n                  />\r\n                  {errors.keterangan && touched.keterangan && (\r\n                    <div className=\"invalid-feedback\">{errors.keterangan}</div>\r\n                  )}\r\n                </CCol>\r\n              </CFormGroup>\r\n            </CModalBody>\r\n            <CModalFooter>\r\n              <CButton\r\n                type=\"submit\"\r\n                color=\"primary\"\r\n                disabled={loading ? true : false}\r\n              >\r\n                {loading ? (\r\n                  <img\r\n                    width={21}\r\n                    src={LoadAnimationWhite}\r\n                    alt=\"load-animation\"\r\n                  />\r\n                ) : (\r\n                  \"Simpan\"\r\n                )}\r\n              </CButton>{\" \"}\r\n              <CButton\r\n                type=\"button\"\r\n                color=\"secondary\"\r\n                onClick={() =>\r\n                  setModalEdit({\r\n                    ...modalEdit,\r\n                    modal: !modalEdit.modal,\r\n                    id: null,\r\n                  })\r\n                }\r\n              >\r\n                Batal\r\n              </CButton>\r\n            </CModalFooter>\r\n          </CForm>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditCuti;\r\n","import axiosInstance from \"src/helpers/axios\";\r\n\r\nexport const getCutiById = (id_pegawai, id_cuti, setCuti) => {\r\n  axiosInstance\r\n    .get(`admin/pegawai/${id_pegawai}/cuti/${id_cuti}`)\r\n    .then((res) => {\r\n      setCuti(res.data.data);\r\n      console.log(res.data);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response.data);\r\n    });\r\n};\r\n","import axiosInstance from \"src/helpers/axios\";\r\n\r\nexport const editCuti = (\r\n  id_pegawai,\r\n  id_cuti,\r\n  values,\r\n  setLoading,\r\n  showAlertSuccess,\r\n  showAlertError\r\n) => {\r\n  setLoading(true);\r\n\r\n  axiosInstance\r\n    .put(`admin/pegawai/${id_pegawai}/cuti/${id_cuti}`, values)\r\n    .then((res) => {\r\n      console.log(res.data);\r\n      setLoading(false);\r\n      showAlertSuccess();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response.data);\r\n      showAlertError(err.response.data.errors);\r\n    });\r\n};\r\n"],"sourceRoot":""}