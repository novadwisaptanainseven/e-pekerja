{"version":3,"sources":["views/pages/Admin/Pensiun/TambahPensiun.js","context/actions/Pensiun.js/insertPensiun.js","../node_modules/@emotion/unitless/dist/unitless.browser.esm.js","context/actions/Pegawai/SemuaPegawai/getSelectPegawai.js"],"names":["MySwal","withReactContent","swal2","TambahPensiun","history","useHistory","useState","pegawai","setPegawai","loading","setLoading","touchedSelect","setTouchedSelect","useEffect","getSelectPegawai","optionsData","React","useMemo","options","forEach","item","push","value","id_pegawai","label","nama","getDataOptions","showAlertSuccess","fire","icon","title","showConfirmButton","timer","then","res","showAlertError","message","err_message","key","text","result","validationSchema","Yup","shape","required","tgl_pensiun","keterangan","handleFormSubmit","values","formData","FormData","append","entries","pair","console","log","axiosInstance","post","header","_boundary","data","catch","err","response","errors","insertPensiun","customStyles","control","provided","state","border","className","type","color","onClick","goBack","initialValues","onSubmit","touched","handleChange","handleBlur","handleSubmit","setFieldValue","row","md","styles","name","id","onChange","opt","onFocus","placeholder","isSearchable","isClearable","style","fontSize","onBlur","disabled","width","src","LoadAnimationWhite","alt","unitlessKeys","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","fontWeight","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","WebkitLineClamp","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","setData","get"],"mappings":"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","file":"static/js/58.b62c8d66.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport swal2 from \"sweetalert2\";\r\nimport withReactContent from \"sweetalert2-react-content\";\r\nimport * as Yup from \"yup\";\r\n\r\nimport {\r\n  CFormGroup,\r\n  CInput,\r\n  CLabel,\r\n  CCol,\r\n  CCard,\r\n  CCardBody,\r\n  CCardFooter,\r\n  CCardHeader,\r\n  CButton,\r\n  CForm,\r\n} from \"@coreui/react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Select from \"react-select\";\r\nimport { getSelectPegawai } from \"src/context/actions/Pegawai/SemuaPegawai/getSelectPegawai\";\r\nimport { Formik } from \"formik\";\r\nimport { LoadAnimationWhite } from \"src/assets\";\r\nimport { insertPensiun } from \"src/context/actions/Pensiun.js/insertPensiun\";\r\n\r\nconst MySwal = withReactContent(swal2);\r\n\r\nconst TambahPensiun = () => {\r\n  const history = useHistory();\r\n  const [pegawai, setPegawai] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [touchedSelect, setTouchedSelect] = useState(false);\r\n\r\n  const goBackToParent = () => {\r\n    history.goBack();\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Get select pegawai\r\n    getSelectPegawai(setPegawai);\r\n  }, []);\r\n\r\n  const getDataOptions = (pegawai) => {\r\n    let options = [];\r\n\r\n    pegawai.forEach((item) => {\r\n      options.push({\r\n        value: item.id_pegawai,\r\n        label: item.nama,\r\n      });\r\n    });\r\n\r\n    return options;\r\n  };\r\n\r\n  const optionsData = React.useMemo(() => getDataOptions(pegawai), [pegawai]);\r\n\r\n  // Inisialisasi state formik\r\n  const initState = {\r\n    id_pegawai: \"\",\r\n    tgl_pensiun: \"\",\r\n    keterangan: \"\",\r\n  };\r\n\r\n  // Fungsi untuk menampilkan alert success tambah data\r\n  const showAlertSuccess = () => {\r\n    MySwal.fire({\r\n      icon: \"success\",\r\n      title: \"Tambah Data Berhasil\",\r\n      showConfirmButton: false,\r\n      timer: 1500,\r\n    }).then((res) => {\r\n      history.push(\"/epekerja/admin/pensiun\");\r\n    });\r\n  };\r\n\r\n  // Fungsi untuk menampilkan alert error tambah data\r\n  const showAlertError = (message) => {\r\n    let err_message = \"\";\r\n\r\n    for (const key in message) {\r\n      err_message += `${message[key]}, `;\r\n    }\r\n\r\n    MySwal.fire({\r\n      icon: \"error\",\r\n      title: \"Tambah Data Gagal\",\r\n      text: err_message,\r\n    }).then((result) => {\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  // Setting validasi form menggunakan YUP & FORMIK\r\n  const validationSchema = Yup.object().shape({\r\n    id_pegawai: Yup.string().required(\"Pegawai harus diisi\"),\r\n    tgl_pensiun: Yup.string().required(\"Tanggal pensiun harus diisi\"),\r\n    keterangan: Yup.string().required(\"Keterangan / alasan harus diisi\"),\r\n  });\r\n\r\n  // Menangani value dari form submit\r\n  const handleFormSubmit = (values) => {\r\n    const formData = new FormData();\r\n    formData.append(\"id_pegawai\", values.id_pegawai);\r\n    formData.append(\"tgl_pensiun\", values.tgl_pensiun);\r\n    formData.append(\"keterangan\", values.keterangan);\r\n\r\n    for (var pair of formData.entries()) {\r\n      console.log(pair);\r\n    }\r\n\r\n    // Tambah data pensiun\r\n    insertPensiun(formData, setLoading, showAlertSuccess, showAlertError);\r\n  };\r\n\r\n  // Custom Styling for React Select\r\n  const customStyles = {\r\n    control: (provided, state) => ({\r\n      ...provided,\r\n      border: !touchedSelect ? provided.border : \"1px solid #e55353\",\r\n    }),\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CCard>\r\n        <CCardHeader className=\"d-flex justify-content-between\">\r\n          <h3>Tambah Data Pensiun</h3>\r\n          <CButton\r\n            type=\"button\"\r\n            color=\"warning\"\r\n            className=\"text-white\"\r\n            onClick={goBackToParent}\r\n          >\r\n            Kembali\r\n          </CButton>\r\n        </CCardHeader>\r\n        <Formik\r\n          initialValues={initState}\r\n          validationSchema={validationSchema}\r\n          onSubmit={(values) => handleFormSubmit(values)}\r\n        >\r\n          {({\r\n            values,\r\n            errors,\r\n            touched,\r\n            handleChange,\r\n            handleBlur,\r\n            handleSubmit,\r\n            setFieldValue,\r\n          }) => (\r\n            <CForm onSubmit={handleSubmit}>\r\n              <CCardBody>\r\n                <CFormGroup row>\r\n                  <CCol md=\"2\">\r\n                    <CLabel>Nama Pegawai</CLabel>\r\n                  </CCol>\r\n                  <CCol>\r\n                    <Select\r\n                      styles={customStyles}\r\n                      name=\"id_pegawai\"\r\n                      id=\"id_pegawai\"\r\n                      onChange={(opt) => {\r\n                        setTouchedSelect(false);\r\n                        setFieldValue(\"id_pegawai\", opt ? opt.value : \"\");\r\n                      }}\r\n                      onFocus={() => setTouchedSelect(true)}\r\n                      placeholder=\"-- Pilih Pegawai --\"\r\n                      isSearchable\r\n                      isClearable\r\n                      options={optionsData}\r\n                    />\r\n                    {!values.id_pegawai && touchedSelect && (\r\n                      <div\r\n                        className=\"text-danger mt-1\"\r\n                        style={{ fontSize: \"0.8em\" }}\r\n                      >\r\n                        Nama penerima harus diisi\r\n                      </div>\r\n                    )}\r\n                  </CCol>\r\n                </CFormGroup>\r\n\r\n                <CFormGroup row>\r\n                  <CCol md=\"2\">\r\n                    <CLabel>Tgl. Pensiun</CLabel>\r\n                  </CCol>\r\n                  <CCol>\r\n                    <CInput\r\n                      type=\"date\"\r\n                      name=\"tgl_pensiun\"\r\n                      id=\"tgl_pensiun\"\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                      value={values.tgl_pensiun || \"\"}\r\n                      placeholder=\"Masukkan tgl. pensiun\"\r\n                      className={\r\n                        errors.tgl_pensiun && touched.tgl_pensiun\r\n                          ? \"is-invalid\"\r\n                          : null\r\n                      }\r\n                    />\r\n                    {errors.tgl_pensiun && touched.tgl_pensiun && (\r\n                      <div className=\"invalid-feedback\">\r\n                        {errors.tgl_pensiun}\r\n                      </div>\r\n                    )}\r\n                  </CCol>\r\n                </CFormGroup>\r\n                <CFormGroup row>\r\n                  <CCol md=\"2\">\r\n                    <CLabel>Keterangan</CLabel>\r\n                  </CCol>\r\n                  <CCol>\r\n                    <CInput\r\n                      type=\"text\"\r\n                      name=\"keterangan\"\r\n                      id=\"keterangan\"\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                      value={values.keterangan || \"\"}\r\n                      placeholder=\"Masukkan keterangan / alasan pensiun\"\r\n                      className={\r\n                        errors.keterangan && touched.keterangan\r\n                          ? \"is-invalid\"\r\n                          : null\r\n                      }\r\n                    />\r\n                    {errors.keterangan && touched.keterangan && (\r\n                      <div className=\"invalid-feedback\">\r\n                        {errors.keterangan}\r\n                      </div>\r\n                    )}\r\n                  </CCol>\r\n                </CFormGroup>\r\n              </CCardBody>\r\n              <CCardFooter>\r\n                <CButton\r\n                  color=\"primary\"\r\n                  type=\"submit\"\r\n                  className=\"mr-1\"\r\n                  disabled={loading ? true : false}\r\n                  onClick={() => {\r\n                    !values.id_pegawai\r\n                      ? setTouchedSelect(true)\r\n                      : setTouchedSelect(false);\r\n                  }}\r\n                >\r\n                  {loading ? (\r\n                    <img\r\n                      width={21}\r\n                      src={LoadAnimationWhite}\r\n                      alt=\"load-animation\"\r\n                    />\r\n                  ) : (\r\n                    \"Simpan\"\r\n                  )}\r\n                </CButton>\r\n              </CCardFooter>\r\n            </CForm>\r\n          )}\r\n        </Formik>\r\n      </CCard>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TambahPensiun;\r\n","import axiosInstance from \"src/helpers/axios\";\r\n\r\nexport const insertPensiun = (\r\n  values,\r\n  setLoading,\r\n  showAlertSuccess,\r\n  showAlertError\r\n) => {\r\n  setLoading(true);\r\n\r\n  axiosInstance\r\n    .post(\"admin/pensiun\", values, {\r\n      header: {\r\n        \"Content-Type\": `multipart/form-data; boundary=${values._boundary}`,\r\n      },\r\n    })\r\n    .then((res) => {\r\n      console.log(res.data);\r\n      setLoading(false);\r\n      showAlertSuccess();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response.data);\r\n      showAlertError(err.response.data.errors);\r\n    });\r\n};\r\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport default unitlessKeys;\n","import axiosInstance from \"src/helpers/axios\";\r\n\r\nexport const getSelectPegawai = (setData) => {\r\n  axiosInstance\r\n    .get(\"admin/pegawai/semua-pegawai\")\r\n    .then((res) => {\r\n      setData(res.data.data);\r\n      // console.log(res.data);\r\n    })\r\n    .catch((err) => {\r\n      // console.log(err.response.data);\r\n    });\r\n};\r\n"],"sourceRoot":""}