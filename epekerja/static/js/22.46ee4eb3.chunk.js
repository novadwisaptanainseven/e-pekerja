(this.webpackJsonpEPekerja=this.webpackJsonpEPekerja||[]).push([[22],{1011:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(7),o=a(655),c=a(587),r=a(637),s=a(627),l=a(1),d=a.n(l),u=a(641),b=a.n(u),j=a(664),f=a(648),h=a(17),p=function(e){var t=e.filterText,a=e.setFilterText,n=e.setResetPaginationToggle,i=e.resetPaginationToggle,o=e.titleTombol,c=e.titleCari,r=e.handleTambahButton;return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"d-flex justify-content-between",style:{width:"100%"},children:[Object(h.jsx)(s.f,{type:"button",color:"primary",onClick:r,children:o}),Object(h.jsx)("div",{className:"d-flex",children:Object(h.jsx)(f.a,{onFilter:function(e){return a(e.target.value)},onClear:function(){t&&(n(!i),a(""))},filterText:t,titleCari:c})})]})})},m=d.a.memo(p),O=a(638),g=a(634),x=a(650),v=a(629),w=a(626),k=function(e,t,a){w.a.get("admin/pegawai/".concat(e,"/pembaruan-sk/").concat(t,"/delete")).then((function(e){console.log(e.data),_(a)})).catch((function(e){console.log(e.response.data)}))},y=function(e,t,a,n,i,o){a(!0),w.a.post("admin/pegawai/sk/".concat(e),t,{header:{"Content-Type":"multipart/form-data; boundary=".concat(t._boundary)}}).then((function(e){console.log(e.data),a(!1),n(),_(o)})).catch((function(e){console.log(e.response.data),i(e.response.data.errors)}))},S=a(40),_=function(e){e({type:S.LOADING}),w.a.get("admin/pegawai/sk").then((function(t){e({type:S.SUCCESS,payload:t.data.data}),console.log(t.data)})).catch((function(t){e({type:S.ERROR,payload:t.response.data.message}),console.log(t.response.data)}))},C=function(e,t,a,n,i){t(!0),w.a.post("admin/pegawai/upload-sk",e,{header:{"Content-Type":"multipart/form-data; boundary=".concat(e._boundary)}}).then((function(e){console.log(e.data),t(!1),a(),_(i)})).catch((function(e){console.log(e.response.data),n(e.response.data.errors)}))},N=function(e,t){w.a.get("admin/pegawai/sk/".concat(e)).then((function(e){t(e.data.data),console.log(e.data)})).catch((function(e){console.log(e.response.data)}))},K=a(661),P=a(631),B=a.n(P),F=a(632),T=a.n(F),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{no_sk:e?e.no_sk:"",id_pegawai:e?e.id_pegawai:""}},D=a(635),L=D.c().shape({no_sk:D.e().required("No. SK harus diisi"),id_pegawai:D.e().required("Penerima harus diisi")}),M=a(644),R=T()(B.a),z=function(e){var t=e.modal,a=e.setModal,o=e.dispatch,c=Object(l.useState)(!1),r=Object(i.a)(c,2),u=r[0],b=r[1],j=Object(l.useState)([]),f=Object(i.a)(j,2),p=f[0],m=f[1],w=Object(l.useState)(""),k=Object(i.a)(w,2),S=k[0],_=k[1],C=Object(l.useState)(!1),P=Object(i.a)(C,2),B=P[0],F=P[1];Object(l.useEffect)((function(){if(t.id)return Object(K.a)(m),N(t.id,_),function(){_(""),F(!1)}}),[t]);var T=d.a.useMemo((function(){return function(e){var t=[];return e.forEach((function(e){t.push({value:e.id_pegawai,label:e.nama})})),t}(p)}),[p]),D=function(){R.fire({icon:"success",title:"Edit Data Berhasil",showConfirmButton:!1,timer:1500}).then((function(e){a(!t)}))},z=function(e){var t="";for(var a in e)t+="".concat(e[a],", ");R.fire({icon:"error",title:"Edit Data Gagal",text:t}).then((function(e){b(!1)}))},A={control:function(e,t){return Object(n.a)(Object(n.a)({},e),{},{border:B?"1px solid #e55353":e.border})}};return Object(h.jsx)("div",{children:S?Object(h.jsx)(g.a,{initialValues:E(S),validationSchema:L,onSubmit:function(e){var a=new FormData;a.append("id_pegawai",e.id_pegawai),a.append("no_sk",e.no_sk);var n,i=Object(O.a)(a.entries());try{for(i.s();!(n=i.n()).done;){var c=n.value;console.log(c)}}catch(r){i.e(r)}finally{i.f()}y(t.id,a,b,D,z,o)},children:function(e){var n=e.values,i=e.errors,o=e.touched,c=e.handleChange,r=e.handleBlur,l=e.handleSubmit,d=e.setFieldValue;return Object(h.jsxs)(s.x,{onSubmit:l,className:"form-horizontal",children:[Object(h.jsxs)(s.O,{children:[Object(h.jsxs)(s.y,{children:[Object(h.jsx)(s.L,{children:"Pegawai"}),Object(h.jsx)(x.a,{styles:A,name:"id_pegawai",onChange:function(e){F(!1),d("id_pegawai",e?e.value:"")},onFocus:function(){return n.id_pegawai?F(!1):F(!0)},placeholder:"-- Pilih Pegawai --",isSearchable:!0,isClearable:!0,options:T,defaultValue:{value:S?S.id_pegawai:"",label:S?S.nama:""}}),!n.id_pegawai&&B&&Object(h.jsx)("div",{className:"text-danger mt-1",style:{fontSize:"0.8em"},children:"Nama penerima harus diisi"})]}),Object(h.jsxs)(s.y,{children:[Object(h.jsx)(s.L,{children:"No. SK"}),Object(h.jsx)(s.E,{type:"text",name:"no_sk",placeholder:"Masukkan No. SK",onChange:c,onBlur:r,value:n.no_sk,className:i.no_sk&&o.no_sk?"is-invalid":null}),i.no_sk&&o.no_sk&&Object(h.jsx)("div",{className:"invalid-feedback",children:i.no_sk})]})]}),Object(h.jsxs)(s.P,{children:[Object(h.jsx)(s.f,{type:"submit",color:"primary",disabled:!!u,onClick:function(){n.id_pegawai?F(!1):F(!0)},children:u?Object(h.jsx)("img",{width:21,src:v.e,alt:"load-animation"}):"Simpan"})," ",Object(h.jsx)(s.f,{type:"button",color:"secondary",onClick:function(){return a(!t)},children:"Batal"})]})]})}}):Object(h.jsx)(M.a,{})})},A={no_sk:"",id_pegawai:"",file:""},U=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf"],q=D.c().shape({no_sk:D.e().required("No. SK harus diisi"),id_pegawai:D.e().required("Penerima harus diisi"),file:D.a().required("File SK harus diisi").test("size","Kapasitas file maksimal 2 mb",(function(e){return!e||e&&e.size<=2048e3})).test("type","Eksistensi yang diperbolehkan hanya PDF, DOC, dan DOCX",(function(e){return!e||e&&U.includes(e.type)}))}),V=T()(B.a),H=function(e){var t=e.modal,a=e.setModal,o=e.dispatch,c=Object(l.useState)(!1),r=Object(i.a)(c,2),u=r[0],b=r[1],j=Object(l.useState)([]),f=Object(i.a)(j,2),p=f[0],m=f[1],w=Object(l.useState)(!1),k=Object(i.a)(w,2),y=k[0],S=k[1];Object(l.useEffect)((function(){Object(K.a)(m)}),[]);var _=d.a.useMemo((function(){return function(e){var t=[];return e.forEach((function(e){t.push({value:e.id_pegawai,label:e.nama})})),t}(p)}),[p]),N=function(){V.fire({icon:"success",title:"Upload SK Berhasil",showConfirmButton:!1,timer:1500}).then((function(e){a(!t)}))},P=function(e){var t="";for(var a in e)t+="".concat(e[a],", ");V.fire({icon:"error",title:"Upload SK Gagal",text:t}).then((function(e){b(!1)}))},B={control:function(e,t){return Object(n.a)(Object(n.a)({},e),{},{border:y?"1px solid #e55353":e.border})}};return Object(h.jsx)("div",{children:Object(h.jsx)(g.a,{initialValues:A,validationSchema:q,onSubmit:function(e){var t=new FormData;t.append("id_pegawai",e.id_pegawai),t.append("no_sk",e.no_sk),t.append("file",e.file);var a,n=Object(O.a)(t.entries());try{for(n.s();!(a=n.n()).done;){var i=a.value;console.log(i)}}catch(c){n.e(c)}finally{n.f()}C(t,b,N,P,o)},children:function(e){var n=e.values,i=e.errors,o=e.touched,c=e.handleChange,r=e.handleBlur,l=e.handleSubmit,d=e.setFieldValue;return Object(h.jsxs)(s.x,{onSubmit:l,className:"form-horizontal",children:[Object(h.jsxs)(s.O,{children:[Object(h.jsxs)(s.y,{children:[Object(h.jsx)(s.L,{children:"Pegawai"}),Object(h.jsx)(x.a,{styles:B,name:"id_pegawai",onChange:function(e){S(!1),d("id_pegawai",e?e.value:"")},onFocus:function(){return n.id_pegawai?S(!1):S(!0)},placeholder:"-- Pilih Pegawai --",isSearchable:!0,isClearable:!0,options:_}),!n.id_pegawai&&y&&Object(h.jsx)("div",{className:"text-danger mt-1",style:{fontSize:"0.8em"},children:"Nama penerima harus diisi"})]}),Object(h.jsxs)(s.y,{children:[Object(h.jsx)(s.L,{children:"No. SK"}),Object(h.jsx)(s.E,{type:"text",name:"no_sk",placeholder:"Masukkan No. SK",onChange:c,onBlur:r,value:n.no_sk,className:i.no_sk&&o.no_sk?"is-invalid":null}),i.no_sk&&o.no_sk&&Object(h.jsx)("div",{className:"invalid-feedback",children:i.no_sk})]}),Object(h.jsxs)(s.y,{children:[Object(h.jsx)(s.L,{children:"File SK"}),Object(h.jsx)(s.E,{type:"file",name:"file",placeholder:"Masukkan file SK",onChange:function(e){return d("file",e.target.files[0])},onBlur:r,className:i.file&&o.file?"is-invalid":null}),i.file&&o.file&&Object(h.jsx)("div",{className:"invalid-feedback",children:i.file}),Object(h.jsx)(s.z,{children:"File SK harus berekstensi PDF, DOC, DOCX"})]})]}),Object(h.jsxs)(s.P,{children:[Object(h.jsx)(s.f,{type:"submit",color:"primary",disabled:!!u,onClick:function(){n.id_pegawai?S(!1):S(!0)},children:u?Object(h.jsx)("img",{width:21,src:v.e,alt:"load-animation"}):"Simpan"})," ",Object(h.jsx)(s.f,{type:"button",color:"secondary",onClick:function(){return a(!t)},children:"Batal"})]})]})}})})},G=a(163),J=a(649),X=a(657),Z=T()(B.a);t.default=function(){var e=Object(l.useState)(""),t=Object(i.a)(e,2),a=t[0],d=t[1],u=Object(l.useState)(!1),f=Object(i.a)(u,2),p=f[0],O=f[1],g=Object(l.useState)(!1),x=Object(i.a)(g,2),v=x[0],w=x[1],y=Object(l.useState)({modal:!1,id:null}),S=Object(i.a)(y,2),C=S[0],N=S[1],K=Object(l.useContext)(G.a),P=K.dataSKState,B=K.dataSKDispatch,F=P.data;Object(l.useEffect)((function(){_(B)}),[B]);var T=F?F.filter((function(e){return!(!e.nama.toLowerCase().includes(a.toLowerCase())&&!e.no_sk.toLowerCase().includes(a.toLowerCase()))})):[],E=[{name:"No",selector:"no",sortable:!0,width:"80px"},{name:"No. SK",selector:"no_sk",sortable:!0,wrap:!0},{name:"Pegawai",selector:"nama",sortable:!0,wrap:!0},{name:"Status",width:"95px",selector:"status_pegawai",sortable:!0,wrap:!0},{name:"File SK",selector:"file",sortable:!0,wrap:!0,cell:function(e){return Object(h.jsx)("div",{children:Object(h.jsx)("a",{href:e.file?Object(X.a)(e.file):".",target:"_blank",rel:"noreferrer",children:e.file?Object(J.a)(e.file):"File SK Belum Ada"})})}},{name:"Action",wrap:!0,cell:function(e){return Object(h.jsx)("div",{"data-tag":"allowRowEvents",className:"my-1",children:Object(h.jsxs)(s.g,{className:"mb-1",children:[Object(h.jsx)(s.f,{color:"info",className:"btn btn-sm",onClick:function(){return N(Object(n.a)(Object(n.a)({},C),{},{modal:!0,id:e.id_riwayat_sk}))},children:Object(h.jsx)(r.a,{content:o.a,color:"white"})}),Object(h.jsx)(s.f,{color:"danger",className:"btn btn-sm",onClick:function(){return D(e.id_pegawai,e.id_riwayat_sk)},children:Object(h.jsx)(r.a,{content:c.a,color:"danger"})})]})})}}],D=function(e,t){Z.fire({icon:"warning",title:"Anda yakin ingin menghapus data ini ?",text:"Jika yakin, klik YA",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"YA"}).then((function(a){a.isConfirmed&&(k(e,t,B),Z.fire({icon:"success",title:"Terhapus",text:"Data berhasil dihapus"}))}))};return Object(h.jsxs)("div",{children:[Object(h.jsxs)(s.h,{children:[Object(h.jsx)(s.l,{children:Object(h.jsx)("h3",{children:"Data SK"})}),Object(h.jsx)(s.i,{children:F?Object(h.jsx)(b.a,{columns:E,data:T,noHeader:!0,responsive:!0,customStyles:j.a,pagination:!0,paginationResetDefaultPage:p,subHeader:!0,subHeaderComponent:Object(h.jsx)(m,{handleTambahButton:function(){w(!v)},titleTombol:"Upload SK",titleCari:"Cari SK",filterText:a,setFilterText:d,resetPaginationToggle:p,setResetPaginationToggle:O}),highlightOnHover:!0}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(M.a,{})})})]}),Object(h.jsxs)(s.N,{show:v,onClose:function(){return w(!v)},children:[Object(h.jsx)(s.Q,{closeButton:!0,children:Object(h.jsx)(s.R,{children:"Upload SK"})}),Object(h.jsx)(H,{modal:v,setModal:w,dispatch:B})]}),Object(h.jsxs)(s.N,{show:C.modal,onClose:function(){return N(Object(n.a)(Object(n.a)({},C),{},{modal:!C.modal,id:null}))},children:[Object(h.jsx)(s.Q,{closeButton:!0,children:Object(h.jsx)(s.R,{children:"Edit SK"})}),Object(h.jsx)(z,{modal:C,setModal:N,dispatch:B})]})]})}},639:function(e,t,a){"use strict";function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}a.d(t,"a",(function(){return n}))},644:function(e,t,a){"use strict";var n=a(627),i=(a(1),a(629)),o=a(17);t.a=function(){return Object(o.jsx)(n.X,{className:"mb-3",children:Object(o.jsx)(n.n,{className:"text-center",children:Object(o.jsx)("img",{className:"mt-4 ml-3",width:30,src:i.d,alt:"load-animation"})})})}},648:function(e,t,a){"use strict";a(1);var n,i,o=a(639),c=a(643),r=c.default.button(n||(n=Object(o.a)(["\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  height: 37px;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #3e5973;\n  border: none;\n  color: white;\n  padding: 0 10px;\n  transition: 0.3s;\n\n  &:hover {\n    background-color: #283c4f;\n  }\n"]))),s=c.default.input(i||(i=Object(o.a)(["\n  height: 37px;\n  width: 200px;\n  border-radius: 3px;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border: 1px solid #e5e5e5;\n  padding: 0 32px 0 16px;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]))),l=a(17);t.a=function(e){var t=e.filterText,a=e.onFilter,n=e.onClear,i=e.titleCari,o=void 0===i?"Pencarian...":i;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(s,{id:"search",type:"text",placeholder:o,"aria-label":"Search Input",value:t,onChange:a}),Object(l.jsx)(r,{type:"button",onClick:n,children:"Reset"})]})}},649:function(e,t,a){"use strict";t.a=function(e){var t=e.split("/");return t[t.length-1]}},655:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M345.994,42.019,179.531,208.481A646.3,646.3,0,0,0,25.325,456.521a24.845,24.845,0,0,0,6,25.708l.087.087a24.84,24.84,0,0,0,17.611,7.342,25.172,25.172,0,0,0,8.1-1.344,646.283,646.283,0,0,0,248.04-154.207L471.62,167.646A88.831,88.831,0,0,0,345.994,42.019ZM282.531,311.48A614.445,614.445,0,0,1,60.419,453.221,614.435,614.435,0,0,1,202.158,231.108l99.162-99.161,80.372,80.372ZM448.993,145.019l-44.674,44.673L323.947,109.32l44.674-44.674a56.832,56.832,0,1,1,80.372,80.373Z' class='ci-primary'/>"]},657:function(e,t,a){"use strict";t.a=function(e){var t=e.split("/"),a=t[t.length-1];return"".concat(localStorage.baseURL,"sk/").concat(a)}},661:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(626),i=function(e){n.a.get("admin/pegawai/semua-pegawai").then((function(t){e(t.data.data)})).catch((function(e){}))}},664:function(e,t,a){"use strict";t.a={headCells:{style:{fontSize:"1.15em"}}}}}]);
//# sourceMappingURL=22.46ee4eb3.chunk.js.map