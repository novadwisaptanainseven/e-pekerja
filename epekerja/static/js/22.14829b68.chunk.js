(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[22],{638:function(a,n,t){"use strict";function e(a,n){return n||(n=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(n)}}))}t.d(n,"a",(function(){return e}))},640:function(a,n,t){"use strict";n.a=function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(t){if("filter_tanggal"===t){var e="first_date=".concat(n.startDate,"&last_date=").concat(n.endDate);window.open("".concat(localStorage.baseURL).concat(a,"/export/?").concat(e),"_self")}else if("filter_tahun"===t){var c="tahun=".concat(n);window.open("".concat(localStorage.baseURL).concat(a,"/export/?").concat(c),"_self")}else if("filter_bulan_tahun"===t){var i="bulan=".concat(n.bulan,"&tahun=").concat(n.tahun);window.open("".concat(localStorage.baseURL).concat(a,"/export?").concat(i),"_self")}}else window.open("".concat(localStorage.baseURL).concat(a,"/export"),"_self")}},645:function(a,n,t){"use strict";t(1);var e,c,i=t(638),o=t(643),r=o.default.button(e||(e=Object(i.a)(["\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  height: 37px;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #3e5973;\n  border: none;\n  color: white;\n  padding: 0 10px;\n  transition: 0.3s;\n\n  &:hover {\n    background-color: #283c4f;\n  }\n"]))),s=o.default.input(c||(c=Object(i.a)(["\n  height: 37px;\n  width: 200px;\n  border-radius: 3px;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border: 1px solid #e5e5e5;\n  padding: 0 32px 0 16px;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]))),l=t(17);n.a=function(a){var n=a.filterText,t=a.onFilter,e=a.onClear;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(s,{id:"search",type:"text",placeholder:"Cari pegawai","aria-label":"Search Input",value:n,onChange:t}),Object(l.jsx)(r,{type:"button",onClick:e,children:"Reset"})]})}},689:function(a,n,t){"use strict";t.d(n,"a",(function(){return c}));var e=t(626),c=function(a){e.a.get("admin/master-data/pangkat-golongan").then((function(n){a(n.data.data)})).catch((function(a){}))}},692:function(a,n,t){"use strict";var e=t(628),c=(t(1),t(630)),i=t(17);n.a=function(){return Object(i.jsx)(e.W,{className:"mb-3",children:Object(i.jsx)(e.m,{className:"text-center",children:Object(i.jsx)("img",{className:"mt-4 ml-3",width:30,src:c.c,alt:"load-animation"})})})}},693:function(a,n,t){"use strict";t(1);var e=t(630),c=t(17);n.a=function(){return Object(c.jsx)("img",{width:21,src:e.d,alt:"load-animation"})}},732:function(a,n,t){"use strict";n.a={headCells:{style:{fontSize:"1.15em"}}}},733:function(a,n,t){"use strict";t.d(n,"a",(function(){return e}));var e=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M474.444,19.857a20.336,20.336,0,0,0-21.592-2.781L33.737,213.8v38.066l176.037,70.414L322.69,496h38.074l120.3-455.4A20.342,20.342,0,0,0,474.444,19.857ZM337.257,459.693,240.2,310.37,389.553,146.788l-23.631-21.576L215.4,290.069,70.257,232.012,443.7,56.72Z' class='ci-primary'/>"]},990:function(a,n,t){"use strict";t.r(n);var e=t(2),c=t(10),i=t(571),o=t(733),r=t(639),s=t(628),l=t(1),d=t.n(l),u=t(641),b=t.n(u),j=t(732),p=t(645),k=t(692),g=t(642),h=t(636),m=t(689),f=t(693),O=t(632),x=t.n(O),_=t(633),w=t.n(_),v=t(637),y=t(626),C=t(40),P=function(a){a({type:C.LOADING});y.a.get("admin/kenaikan-pangkat").then((function(n){a({type:C.SUCCESS,payload:n.data.data})})).catch((function(n){a({type:C.ERROR,payload:n.response.data.message}),console.log(n.response.data)}))},S=t(17),N=w()(x.a),B=function(a){var n=a.modal,t=a.setModal,i=a.dispatch,o=Object(l.useState)(!1),r=Object(c.a)(o,2),d=r[0],u=r[1],b=Object(l.useState)([]),j=Object(c.a)(b,2),p=j[0],k=j[1];Object(l.useEffect)((function(){n.modal&&Object(m.a)(k)}),[n]);var O=function(){N.fire({icon:"success",title:"Tambah Kenaikan Pangkat Berhasil",showConfirmButton:!1,timer:1500}).then((function(a){t(Object(e.a)(Object(e.a)({},n),{},{modal:!1}))}))},x=function(a){var n="";for(var t in a)n+="".concat(a[t],", ");N.fire({icon:"error",title:"Tambah Kenaikan Pangkat Gagal",text:n}).then((function(a){u(!1)}))},_=v.c().shape({pangkat_baru:v.e().required("Pangkat golongan harus diisi"),tmt_kenaikan_pangkat:v.e().required("TMT. Kenaikan pangkat harus diisi")});return Object(S.jsxs)(s.M,{show:n.modal,onClose:function(){return t(Object(e.a)(Object(e.a)({},n),{},{modal:!1,id:null}))},children:[Object(S.jsx)(s.P,{closeButton:!0,children:Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:"Nova Dwi Sapta"}),Object(S.jsx)("h5",{className:"font-weight-normal",children:"199727"})]})}),Object(S.jsx)(h.a,{initialValues:{pangkat_baru:"",tmt_kenaikan_pangkat:""},validationSchema:_,onSubmit:function(a){var t=new FormData,e=a.pangkat_baru.split("-"),c=e[0],o=e[1];t.append("id_golongan",c),t.append("pangkat_baru",o),t.append("tmt_kenaikan_pangkat",a.tmt_kenaikan_pangkat);var r,s=Object(g.a)(t.entries());try{for(s.s();!(r=s.n()).done;){var l=r.value;console.log(l)}}catch(d){s.e(d)}finally{s.f()}!function(a,n,t,e,c,i){t(!0),y.a.post("admin/kenaikan-pangkat/".concat(a),n,{header:{"Content-Type":"multipart/form-data; boundary=".concat(n._boundary)}}).then((function(a){console.log(a.data),t(!1),e(),P(i)})).catch((function(a){console.log(a.response.data),c(a.response.data.errors)}))}(n.id,t,u,O,x,i)},children:function(a){var c=a.values,i=a.errors,o=a.touched,r=a.handleChange,l=a.handleBlur,u=a.handleSubmit;return Object(S.jsxs)(s.w,{onSubmit:u,children:[Object(S.jsxs)(s.N,{children:[Object(S.jsxs)(s.x,{children:[Object(S.jsx)(s.K,{children:"Pangkat / Golongan Baru"}),Object(S.jsxs)(s.X,{name:"pangkat_baru",onChange:r,onBlur:l,className:i.pangkat_baru&&o.pangkat_baru?"is-invalid":null,children:[Object(S.jsx)("option",{value:c.pangkat_baru,children:"-- Pilih Pangkat --"}),p.map((function(a,n){return Object(S.jsxs)("option",{value:"".concat(a.id_pangkat_golongan,"-").concat(a.keterangan," (").concat(a.golongan,")"),children:[a.keterangan," (",a.golongan,")"]},n)}))]}),i.pangkat_baru&&o.pangkat_baru&&Object(S.jsx)("div",{className:"invalid-feedback",children:i.pangkat_baru})]}),Object(S.jsxs)(s.x,{children:[Object(S.jsx)(s.K,{children:"TMT. Kenaikan Pangkat"}),Object(S.jsx)(s.D,{type:"date",name:"tmt_kenaikan_pangkat",onChange:r,onBlur:l,className:i.tmt_kenaikan_pangkat&&o.tmt_kenaikan_pangkat?"is-invalid":null}),i.tmt_kenaikan_pangkat&&o.tmt_kenaikan_pangkat&&Object(S.jsx)("div",{className:"invalid-feedback",children:i.tmt_kenaikan_pangkat})]})]}),Object(S.jsxs)(s.O,{children:[Object(S.jsx)(s.f,{type:"submit",color:"primary",disabled:!!d,children:d?Object(S.jsx)(f.a,{}):"Simpan"}),Object(S.jsx)(s.f,{color:"secondary",onClick:function(){return t(Object(e.a)(Object(e.a)({},n),{},{modal:!1,id:null}))},children:"Close"})]})]})}})]})},D=t(738),M=function(a){var n=a.modal,t=a.setModal,i=Object(l.useState)(""),d=Object(c.a)(i,2),u=d[0],b=d[1];Object(l.useEffect)((function(){return n.data&&(console.log(n.data),"pangkat-updated"===n.type?b("Kepada Yth. ".concat(n.data.nama,", pangkat Anda telah diperbarui menjadi ").concat(n.data.pangkat_baru," terhitung mulai tanggal ").concat(Object(D.a)(new Date(n.data.tmt_kenaikan_pangkat),"dd/MM/y"),". Terimakasih")):"akan-naik-pangkat"===n.type&&b("Kepada Yth. ".concat(n.data.nama,", Anda akan mengalami kenaikan pangkat pada tanggal ").concat(Object(D.a)(new Date(n.data.tmt_kenaikan_pangkat),"dd/MM/y"),". Terimakasih"))),function(){return b("")}}),[n]);return Object(S.jsx)("div",{children:Object(S.jsxs)(s.M,{show:n.modal,onClose:function(){return t(Object(e.a)(Object(e.a)({},n),{},{modal:!1}))},children:[Object(S.jsx)(s.P,{closeButton:!0,children:"Kirim Pemberitahuan via WhatsApp"}),Object(S.jsx)(s.N,{children:n.data&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(s.x,{children:[Object(S.jsx)(s.K,{children:"No. HP"}),Object(S.jsx)(s.D,{type:"text",name:"no_hp",value:n.data.no_hp,readOnly:!0})]}),Object(S.jsxs)(s.x,{children:[Object(S.jsx)(s.K,{children:"Pesan"}),Object(S.jsx)(s.kb,{name:"pesan",rows:5,readOnly:!0,value:u})]})]})}),Object(S.jsxs)(s.O,{children:[Object(S.jsxs)(s.f,{color:"primary",onClick:function(){var a=n.data.no_hp.replace("0","62"),t=u;window.open("https://api.whatsapp.com/send?phone=".concat(a,"&text=").concat(t),"blank")},children:["Kirim ",Object(S.jsx)(r.a,{content:o.a})]}),Object(S.jsx)(s.f,{color:"secondary",onClick:function(){return t(Object(e.a)(Object(e.a)({},n),{},{modal:!1}))},children:"Tutup"})]})]})})},K=t(163),T=function(){window.open("".concat(localStorage.baseURL,"print-kenaikan-pangkat"),"_blank")},A=t(640),L=w()(x.a);n.default=function(){var a=Object(l.useState)(""),n=Object(c.a)(a,2),t=n[0],u=n[1],g=Object(l.useState)(!1),h=Object(c.a)(g,2),m=h[0],f=h[1],O=Object(l.useContext)(K.a),x=O.kenaikanPangkatState,_=O.kenaikanPangkatDispatch,w=x.data,v=x.loading,C=Object(l.useState)({modal:!1,data:null,type:null}),N=Object(c.a)(C,2),R=N[0],E=N[1],F=Object(l.useState)({modal:!1}),U=Object(c.a)(F,2),H=U[0],W=U[1];Object(l.useEffect)((function(){P(_)}),[_]);var G=w.filter((function(a){return a.nip.toLowerCase().includes(t.toLowerCase())||a.nama.toLowerCase().includes(t.toLowerCase())})),Y=[{name:"No",selector:"no",sortable:!0,wrap:!0,width:"80px"},{name:"NIP",selector:"nip",sortable:!0,wrap:!0},{name:"Nama",selector:"nama",sortable:!0,wrap:!0},{name:"Pangkat / Gol",wrap:!0,cell:function(a){return Object(S.jsxs)("span",{children:[a.keterangan," (",a.golongan,")"]})}},{name:"Kenaikan Pangkat",selector:"pangkat_baru",wrap:!0,cell:function(a){return Object(S.jsxs)("div",{className:"text-center",children:[a.pangkat_baru&&Object(S.jsxs)("span",{children:[a.pangkat_baru," ",Object(S.jsx)("br",{}),Object(D.a)(new Date(a.tmt_kenaikan_pangkat),"dd/MM/y")]}),!a.pangkat_baru&&Object(S.jsx)(s.f,{className:"my-1",color:"danger",onClick:function(){return E(Object(e.a)(Object(e.a)({},R),{},{modal:!0,id:a.id}))},children:"Tidak ada kenaikan pangkat"})]})}},{name:"Aksi",cell:function(a){return Object(S.jsx)("div",{"data-tag":"allowRowEvents",className:"my-1",children:a.pangkat_baru&&Object(S.jsx)(s.f,{color:"dark",onClick:function(){return I(a.id)},disabled:!a.pangkat_baru,children:"Batalkan Kenaikan"})})}}],I=function(a){L.fire({icon:"warning",title:"Anda yakin ingin membatalkan kenaikan pangkat untuk pegawai ini ?",text:"Jika yakin, klik YA",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"YA"}).then((function(n){n.isConfirmed&&(!function(a,n){y.a.delete("admin/kenaikan-pangkat-batal/".concat(a)).then((function(a){console.log(a.data),P(n)})).catch((function(a){console.log(a.response.data)}))}(a,_),L.fire({icon:"success",title:"Sukses",text:"Kenaikan Pangkat Berhasil Dibatalkan"}))}))},z=function(a){L.fire({title:"Pangkat Golongan Sedang Diperbarui!",html:"Loading...",timer:1e3,timerProgressBar:!0,didOpen:function(){var n,t;L.showLoading(),n=a.id,t=_,y.a.put("admin/kenaikan-pangkat-update/".concat(n)).then((function(a){console.log(a.data),P(t)})).catch((function(a){console.log(a.response.data)}))}}).then((function(n){n.dismiss===L.DismissReason.timer&&L.fire({icon:"warning",title:"Anda ingin mengirim notifikasi WA ?",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#1c9c25",cancelButtonColor:"#d33",confirmButtonText:"YA",cancelButtonText:"TIDAK"}).then((function(n){n.isConfirmed&&W(Object(e.a)(Object(e.a)({},H),{},{modal:!0,data:a,type:"pangkat-updated"}))}))}))},J=d.a.useMemo((function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(p.a,{onFilter:function(a){return u(a.target.value)},onClear:function(){t&&(f(!m),u(""))},filterText:t}),Object(S.jsxs)(s.f,{type:"button",color:"info",className:"ml-2",onClick:function(){return T()},children:["PDF ",Object(S.jsx)(r.a,{content:i.a})]}),Object(S.jsxs)(s.f,{type:"button",color:"success",className:"ml-2",onClick:function(){return Object(A.a)("kenaikan-pangkat")},children:["Excel ",Object(S.jsx)(r.a,{content:i.a})]})]})}),[t,m]),q=function(a){var n=a.data,t="",c=Date.parse(new Date),i=n.tmt_kenaikan_pangkat?Date.parse(new Date(n.tmt_kenaikan_pangkat)):"";return i&&(t=c<i?"akan-naik-pangkat":"naik-pangkat"),Object(S.jsxs)("div",{style:{padding:"10px 63px"},children:[Object(S.jsxs)(s.W,{className:"mb-1",children:[Object(S.jsx)(s.m,{md:"3",children:Object(S.jsx)("strong",{children:"Status Kenaikan Pangkat"})}),Object(S.jsxs)(s.m,{children:["akan-naik-pangkat"===t&&Object(S.jsx)(s.b,{color:"primary",children:"Akan Naik Pangkat"}),"naik-pangkat"===t&&Object(S.jsx)(s.f,{color:"info",onClick:function(){return z(n)},children:"Update Pangkat"}),!t&&Object(S.jsx)(s.b,{color:"danger",children:"Tidak ada kenaikan pangkat"})]})]}),Object(S.jsxs)(s.W,{className:"mb-1",children:[Object(S.jsx)(s.m,{md:"3",children:Object(S.jsx)("strong",{children:"Pemberitahuan"})}),Object(S.jsxs)(s.m,{children:["akan-naik-pangkat"===t&&Object(S.jsxs)("span",{children:["Pegawai ini akan mengalami kenaikan pangkat menjadi"," ",n.pangkat_baru," pada tanggal"," ",Object(D.a)(new Date(n.tmt_kenaikan_pangkat),"dd/MM/y")," ",Object(S.jsx)("br",{}),Object(S.jsxs)(s.f,{color:"success",className:"mt-1",onClick:function(){return W(Object(e.a)(Object(e.a)({},H),{},{modal:!0,data:n,type:"akan-naik-pangkat"}))},children:["Notifikasi WA ",Object(S.jsx)(r.a,{content:o.a})]})]}),"naik-pangkat"===t&&Object(S.jsx)("span",{children:"Pegawai ini pangkatnya sudah bisa diupdate"})]})]})]})};return Object(S.jsxs)("div",{children:[Object(S.jsxs)(s.h,{children:[Object(S.jsx)(s.l,{children:Object(S.jsx)("h3",{children:"Kenaikan Pangkat PNS"})}),Object(S.jsx)(s.i,{children:w.length>0?Object(S.jsx)(b.a,{columns:Y,data:G,noHeader:!0,responsive:!0,customStyles:j.a,pagination:!0,paginationResetDefaultPage:m,subHeader:!0,subHeaderComponent:J,expandableRows:!0,expandOnRowClicked:!0,expandableRowsComponent:Object(S.jsx)(q,{}),highlightOnHover:!0}):v?Object(S.jsx)(k.a,{}):Object(S.jsx)(b.a,{columns:Y,data:G,noHeader:!0,responsive:!0,customStyles:j.a})})]}),Object(S.jsx)(B,{modal:R,setModal:E,dispatch:_}),Object(S.jsx)(M,{modal:H,setModal:W})]})}}}]);
//# sourceMappingURL=22.14829b68.chunk.js.map